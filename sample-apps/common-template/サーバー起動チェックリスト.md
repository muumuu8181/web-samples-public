# サーバー起動チェックリスト 🔍

## 📋 基本方針
**動作確認結果を伝えるのが私の至上命題**として、以下のチェックリストを必ず実行してから報告すること。

## ✅ 必須チェック項目（順番厳守）

### 1. プロセス確認 🖥️
```bash
ps aux | grep "node server.js" | grep -v grep
```
**期待結果**: プロセスIDと実行状況が表示される
- ✅ 正常: プロセスが表示される
- ❌ 異常: 何も表示されない（プロセス停止）

### 2. ポート使用状況確認 🔌
```bash
lsof -i :3001 2>/dev/null || echo "ポート使用されていません"
```
**期待結果**: node server.jsがポートを使用中
- ✅ 正常: `node server.js (pid: XXXX) tcp *:3001`等が表示
- ❌ 異常: "ポート使用されていません"

### 3. HTTP接続テスト（ルートエンドポイント） 🌐
```bash
curl -s -m 5 http://localhost:3001/ | head -n 3
```
**期待結果**: HTMLレスポンスが返る
- ✅ 正常: `<!DOCTYPE html>` から始まるレスポンス
- ❌ 異常: `Error` または無応答

### 4. API接続テスト（health endpoint） 🩺
```bash
curl -s -m 5 http://localhost:3001/api/health
```
**期待結果**: JSONレスポンス（または200 OK）
- ✅ 正常: `{"status":"ok"}` 等のJSONまたは正常レスポンス
- ❌ 異常: `Error` または無応答

### 5. 設定API確認 ⚙️
```bash
curl -s -m 5 http://localhost:3001/api/config | jq '.config.version' 2>/dev/null || curl -s -m 5 http://localhost:3001/api/config
```
**期待結果**: 設定情報JSONが返る
- ✅ 正常: バージョン情報含むJSON設定データ
- ❌ 異常: `Error` または不正なJSON

## 🚨 チェック結果判定基準

### 🎯 完全成功（報告OK）
- **全項目 ✅**: 「サーバーは正常稼働中、ブラウザアクセス可能」
- **成功率**: 100%

### ⚠️ 部分成功（要調査）
- **80%以上**: 問題箇所を特定して修正後再チェック
- **60-79%**: 重大な問題、要原因調査

### ❌ 失敗（報告禁止）
- **60%未満**: 「サーバー起動失敗」として修復完了まで報告しない

## 📝 報告テンプレート（真の端折らない形式）

```
## ✅ サーバー起動チェックリスト実行結果

### 📋 チェック項目1: プロセス確認 🖥️

● Bash(ps aux | grep "node server.js" | grep -v grep)
  ⎿  [コマンド実行結果の生データをそのまま表示]

● 【結果】: ✅/❌ 完全成功/失敗
  - [詳細な技術的解釈と分析]
  - [数値データの意味と正常性判断]
  - [状態の背景と技術的根拠]

### 📋 チェック項目2: ポート確認 🔌  

● Bash(lsof -i :3001 2>/dev/null || echo "ポート使用されていません")
  ⎿  [コマンド実行結果の生データをそのまま表示]

● 【結果】: ✅/❌ 完全成功/失敗
  - [詳細な技術的解釈と分析]

### 📋 チェック項目3: HTTP接続テスト 🌐

● Bash(curl -s -m 5 http://localhost:3001/ | head -n 3)
  ⎿  [コマンド実行結果の生データをそのまま表示]

● 【結果】: ✅/❌ 完全成功/失敗
  - [詳細な技術的解釈と分析]

### 📋 チェック項目4: API接続テスト 🩺

● Bash(curl -s -m 5 http://localhost:3001/api/health)
  ⎿  [コマンド実行結果の生データをそのまま表示]

● 【結果】: ✅/❌ 完全成功/失敗
  - [詳細な技術的解釈と分析]

### 📋 チェック項目5: 設定API確認 ⚙️

● Bash(curl -s -m 5 http://localhost:3001/api/config | jq '.config.version' 2>/dev/null || curl -s -m 5 http://localhost:3001/api/config | head -c 100)
  ⎿  [コマンド実行結果の生データをそのまま表示]

● 【結果】: ✅/❌ 完全成功/失敗
  - [詳細な技術的解釈と分析]

**総合判定**: ✅ 成功 (5/5) / ❌ 失敗 (X/5)
**アクセス状況**: http://localhost:3001 は利用可能/不可
```

## 🎯 重要な改善点（ユーザー指摘反映）

### 真の端折らない報告とは
1. **生データ表示**: コマンド実行結果をそのまま表示
2. **詳細解釈**: 技術的分析と意味の説明を併記
3. **両方必須**: 生データと解釈の両方が揃って初めて「端折らない」

## 🔧 トラブルシューティング

### よくある問題と対処法

#### 問題1: プロセスが見つからない
```bash
cd /mnt/c/Users/user/common-template-v0.10
node server.js &
sleep 3
# 再チェック実行
```

#### 問題2: ポートが使用されていない
```bash
# 他のプロセスがポートを占有していないか確認
lsof -i :3001
# 必要に応じてプロセス終了
kill -9 <PID>
```

#### 問題3: HTTP接続エラー
```bash
# サーバーログ確認
tail -n 20 /mnt/c/Users/user/common-template-v0.10/server.log
# 設定ファイル確認
cat /mnt/c/Users/user/common-template-v0.10/config.json
```

## 📚 チェックリスト履歴

### v1.0 (2025-07-25)
- 基本5項目のチェックリスト作成
- 報告テンプレート整備
- トラブルシューティング手順追加

---

**重要**: このチェックリストは継続的に改善します。新しい問題や改善点があれば随時追加してください。