<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Áµ±Âêà„Ç¢„Éó„É™ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† v1.0</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --warning: #FF9800;
            --danger: #f44336;
            --success: #4CAF50;
            --bg: #f8f9fa;
            --surface: #fff;
            --text: #333;
            --text-light: #666;
            --border: #ddd;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        header {
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        h1 {
            color: var(--primary);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .version-badge {
            background: var(--secondary);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: normal;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .auth-btn:hover {
            opacity: 0.9;
        }

        /* „Ç¢„Éó„É™„Çø„Éñ */
        .app-tabs {
            display: flex;
            background: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .app-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-light);
            font-size: 14px;
            white-space: nowrap;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .app-tab:hover {
            background: var(--bg);
            color: var(--text);
        }

        .app-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: var(--bg);
        }

        .app-tab .icon {
            font-size: 1.2rem;
        }

        /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .main-content {
            background: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            min-height: 500px;
        }

        .app-content {
            display: none;
            padding: 20px;
        }

        .app-content.active {
            display: block;
        }

        .welcome-content {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .welcome-content p {
            color: var(--text-light);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        /* „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†± */
        .system-info {
            background: var(--bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-card {
            background: var(--surface);
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--primary);
        }

        .info-card h4 {
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .info-card p {
            color: var(--text);
            font-weight: 500;
        }

        /* „Éú„Çø„É≥ */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: opacity 0.3s;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-danger {
            background: var(--danger);
        }

        /* „É≠„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥ */
        .log-section {
            margin-top: 20px;
        }

        .log-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .debug-logs {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-line;
        }

        /* Âãï‰ΩúÁ¢∫Ë™ç„Çª„ÇØ„Ç∑„Éß„É≥ */
        .verification-section {
            margin-top: 20px;
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .verification-status {
            text-align: center;
            margin-bottom: 20px;
        }

        .status-indicator {
            display: inline-block;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .status-indicator.running {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        .status-indicator.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #4CAF50;
        }

        .status-indicator.failed {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f44336;
        }

        .verification-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .verification-step {
            background: var(--bg);
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--border);
        }

        .verification-step.success {
            border-left-color: var(--success);
        }

        .verification-step.failed {
            border-left-color: var(--danger);
        }

        .verification-step.running {
            border-left-color: var(--warning);
        }

        .verification-evidence {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--border);
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }

        /* Ë®≠ÂÆö„Éë„Éç„É´ */
        .settings-panel {
            background: var(--bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        /* „ÅäÈáëÁÆ°ÁêÜÁîªÈù¢ */
        .money-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .input-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .input-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .form-control {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            flex: 1;
            min-width: 120px;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        .transaction-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .transactions-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-income {
            border-left: 4px solid var(--success);
        }

        .transaction-expense {
            border-left: 4px solid var(--danger);
        }

        /* ÊôÇÈñìÁÆ°ÁêÜ„Éª‰ΩìÈáçÁÆ°ÁêÜÁîªÈù¢ */
        .time-panel, .weight-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .timer-section, .bmi-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }

        .timer-display, .bmi-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            margin: 10px 0;
        }

        .timer-clock {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            margin: 15px 0;
        }

        .timer-task {
            font-size: 1.1rem;
            color: #666;
            margin-top: 10px;
        }

        .bmi-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .bmi-status {
            font-size: 1.2rem;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .bmi-underweight { background: #e3f2fd; color: #1976d2; }
        .bmi-normal { background: #e8f5e8; color: #388e3c; }
        .bmi-overweight { background: #fff3e0; color: #f57c00; }
        .bmi-obese { background: #ffebee; color: #d32f2f; }

        .time-list, .weight-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .records-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
        }

        .record-item:last-child {
            border-bottom: none;
        }

        .record-work { border-left: 4px solid #2196F3; }
        .record-study { border-left: 4px solid #4CAF50; }
        .record-exercise { border-left: 4px solid #FF9800; }
        .record-break { border-left: 4px solid #9C27B0; }
        .record-other { border-left: 4px solid #607D8B; }

        /* „É°„É¢ÁÆ°ÁêÜÁîªÈù¢ */
        .memo-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .memo-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .memo-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }

        .memo-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .memo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .memo-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }

        .memo-category {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .memo-content {
            margin: 10px 0;
            line-height: 1.5;
            color: #555;
            white-space: pre-wrap;
        }

        .memo-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }

        .memo-tags {
            display: flex;
            gap: 5px;
        }

        .memo-tag {
            background: #e9ecef;
            color: #495057;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .memo-delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .memo-delete-btn:hover {
            opacity: 0.8;
        }

        /* Ë®àÁÆóÊ©ü„Çπ„Çø„Ç§„É´ */
        .calc-form {
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .calc-input-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calc-input {
            width: 120px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .calc-operator, .calc-equals {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            min-width: 30px;
            text-align: center;
        }

        .calc-result {
            font-size: 24px;
            font-weight: bold;
            color: var(--success);
            min-width: 100px;
            background: var(--bg);
            padding: 8px 15px;
            border-radius: 6px;
            border: 2px solid var(--success);
            text-align: center;
        }

        .calc-button-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calc-btn {
            background: var(--primary);
            font-size: 16px;
            font-weight: bold;
            min-width: 120px;
        }

        .calc-history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--surface);
        }

        .calc-history-item {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .calc-history-item:last-child {
            border-bottom: none;
        }

        .calc-history-item:hover {
            background: var(--bg);
        }

        .calc-expression {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
        }

        .calc-timestamp {
            color: var(--text-light);
            font-size: 12px;
        }

        .calc-delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .calc-delete-btn:hover {
            opacity: 0.8;
        }

        .config-editor {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            width: 100%;
            min-height: 200px;
            resize: vertical;
        }

        /* Ë®≠ÂÆöÁÆ°ÁêÜUI */
        .config-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .checkbox-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--bg);
            transition: background-color 0.2s;
        }

        .checkbox-item:hover {
            background: #f0f0f0;
        }

        .checkbox-item input[type="checkbox"] {
            margin: 0;
            transform: scale(1.1);
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            font-weight: normal;
        }

        .checkbox-item.enabled {
            background: #e8f5e8;
            border-color: var(--success);
        }

        .app-icon {
            font-size: 16px;
            margin-right: 4px;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            .app-tabs {
                flex-direction: column;
            }
            
            .app-tab {
                justify-content: center;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* „Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫ */
        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .status-success {
            background: #e8f5e8;
            color: #2e7d2e;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        /* „É≠„Ç∞Èñ≤Ë¶ßÁîªÈù¢ */
        .logs-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .log-selection, .log-search, .log-content {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bg);
            border-radius: 6px;
        }

        .log-controls, .search-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .log-display {
            background: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            padding: 15px;
            border-radius: 4px;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 1px solid #333;
        }

        .log-line {
            padding: 2px 0;
            border-bottom: 1px solid #333;
        }

        .log-line:last-child {
            border-bottom: none;
        }

        .log-line.highlight {
            background: #264f78;
            color: #ffffff;
        }

        .log-header {
            background: #2d4a5a !important;
            color: #87ceeb !important;
            font-weight: bold;
            border: none !important;
        }

        .file-name {
            color: #87ceeb;
            font-size: 0.9rem;
            font-weight: normal;
            opacity: 0.8;
        }

        .search-count {
            color: var(--primary);
            font-weight: bold;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header>
            <h1>
                üöÄ Áµ±Âêà„Ç¢„Éó„É™ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†
                <span class="version-badge">v0.3</span>
            </h1>
            <div class="user-info" id="userInfo">
                <div class="status" id="connectionStatus">
                    <span class="loading"></span>
                    <span>Êé•Á∂ö‰∏≠...</span>
                </div>
                <button class="auth-btn" id="authBtn">Google„Åß„É≠„Ç∞„Ç§„É≥</button>
            </div>
        </header>

        <!-- „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†± -->
        <div class="system-info">
            <h3>üìä „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±</h3>
            <div class="info-grid" id="systemInfo">
                <div class="info-card">
                    <h4>„Éê„Éº„Ç∏„Éß„É≥</h4>
                    <p id="version">0.3</p>
                </div>
                <div class="info-card">
                    <h4>ÊúâÂäπ„Ç¢„Éó„É™Êï∞</h4>
                    <p id="enabledApps">Ë™≠„ÅøËæº„Åø‰∏≠...</p>
                </div>
            </div>
        </div>

        <!-- „Ç¢„Éó„É™„Çø„Éñ -->
        <div class="app-tabs" id="appTabs">
            <button class="app-tab active" data-app="simple">
                <span class="icon">üìÑ</span>
                <span>„Ç∑„É≥„Éó„É´</span>
            </button>
            <button class="app-tab" data-app="settings">
                <span class="icon">‚öôÔ∏è</span>
                <span>Ë®≠ÂÆö</span>
            </button>
            <button class="app-tab" data-app="logs">
                <span class="icon">üìã</span>
                <span>„É≠„Ç∞„Éï„Ç£„É´„Çø„Éº</span>
            </button>
        </div>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="main-content">
            <!-- „Ç∑„É≥„Éó„É´„Çµ„É≥„Éó„É´„Ç¢„Éó„É™ÁîªÈù¢ -->
            <div class="app-content active" id="simple-content">
                <!-- ÂãïÁöÑ„Å´Ë™≠„ÅøËæº„Åæ„Çå„Çã -->
            </div>

            <!-- Ë®≠ÂÆöÁîªÈù¢ -->
            <div class="app-content" id="settings-content">
                <div class="settings-panel">
                    <h3>‚öôÔ∏è Ë®≠ÂÆöÁÆ°ÁêÜ</h3>
                    <p>config.json „ÅÆÂÜÖÂÆπ„ÇíÁ∑®ÈõÜ„Åß„Åç„Åæ„Åô„ÄÇÂ§âÊõ¥Âæå„ÅØ„ÄåË®≠ÂÆö„Çí‰øùÂ≠ò„Äç„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                    
                    <!-- „Ç¢„Éó„É™ÊúâÂäπÂåñË®≠ÂÆö -->
                    <div class="config-section">
                        <h4>üì± ÊúâÂäπ„Å™„Ç¢„Éó„É™</h4>
                        <div class="checkbox-list" id="enabledAppsCheckboxes">
                            <div class="loading">Ë®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                        </div>
                    </div>

                    <!-- Ê©üËÉΩË®≠ÂÆö -->
                    <div class="config-section">
                        <h4>‚öôÔ∏è Ê©üËÉΩË®≠ÂÆö</h4>
                        <div class="checkbox-list" id="featuresCheckboxes">
                            <div class="loading">Ë®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                        </div>
                    </div>

                    <!-- ‰øùÂ≠ò„Éª„É™„Çª„ÉÉ„Éà„Éú„Çø„É≥ -->
                    <div style="margin: 20px 0;">
                        <button class="btn" onclick="loadConfigUI()">üì• Ë®≠ÂÆöË™≠„ÅøËæº„Åø</button>
                        <button class="btn btn-secondary" onclick="saveConfigUI()">üíæ Ë®≠ÂÆö‰øùÂ≠ò</button>
                        <button class="btn btn-warning" onclick="resetConfig()">üîÑ „É™„Çª„ÉÉ„Éà</button>
                    </div>
                    
                    <!-- È´òÂ∫¶„Å™Ë®≠ÂÆöÔºàJSONÁ∑®ÈõÜÔºâ -->
                    <div class="config-section">
                        <h4>üîß È´òÂ∫¶„Å™Ë®≠ÂÆö (JSON)</h4>
                        <details>
                            <summary>„Ç®„É≥„Ç∏„Éã„Ç¢Âêë„ÅëË®≠ÂÆöÁ∑®ÈõÜ</summary>
                            <textarea class="config-editor" id="configEditor" placeholder="Ë®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠..."></textarea>
                            <div style="margin-top: 10px;">
                                <button class="btn btn-secondary" onclick="loadConfig()">üì• JSONË™≠„ÅøËæº„Åø</button>
                                <button class="btn btn-secondary" onclick="saveConfig()">üíæ JSON‰øùÂ≠ò</button>
                            </div>
                        </details>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <div class="status status-warning">
                            <span>‚ö†Ô∏è</span>
                            <span>Ë®≠ÂÆöÂ§âÊõ¥Âæå„ÅØ„Çµ„Éº„Éê„Éº„ÅÆÂÜçËµ∑Âãï„ÅåÂøÖË¶Å„Åß„Åô</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „É≠„Ç∞Èñ≤Ë¶ßÁîªÈù¢ -->
            <div class="app-content" id="logs-content">
                <div class="logs-panel">
                    <h3>üìã „É≠„Ç∞Èñ≤Ë¶ß</h3>
                    <p>„Ç∑„Çπ„ÉÜ„É†„Åã„Çâ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åï„Çå„ÅüÈÅéÂéª„ÅÆ„É≠„Ç∞„ÇíÈñ≤Ë¶ß„ÉªÊ§úÁ¥¢„Åß„Åç„Åæ„Åô„ÄÇ</p>
                    
                    <!-- „É≠„Ç∞„Éï„Ç°„Ç§„É´ÈÅ∏Êäû -->
                    <div class="log-selection">
                        <h4>üìÅ „É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ß</h4>
                        <div class="log-controls">
                            <button class="btn" onclick="loadLogFiles()">üîÑ „É™„Çπ„ÉàÊõ¥Êñ∞</button>
                            <button class="btn btn-secondary" onclick="loadAllLogs()">üìö ÂÖ®„É≠„Ç∞‰∏ÄÊã¨Ë°®Á§∫</button>
                            <select id="logFileSelect" class="form-control" onchange="loadSelectedLog()">
                                <option value="">ÂÄãÂà•„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Ê§úÁ¥¢„Éï„Ç£„É´„Çø„Éº -->
                    <div class="log-search">
                        <h4>üîç Ê§úÁ¥¢„Éª„Éï„Ç£„É´„Çø„Éº</h4>
                        <p style="font-size: 12px; color: #666; margin-bottom: 10px;">
                            üí° ‰Ωø„ÅÑÊñπ: „ÉÜ„Ç≠„Çπ„Éà„Éú„ÉÉ„ÇØ„Çπ„Å´Ê§úÁ¥¢„Åó„Åü„ÅÑ„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åô„Çã„Å®„ÄÅ„Åì„ÅÆ„Çø„ÉñÂÜÖ„ÅÆ„É≠„Ç∞„ÅÆ„Åø„Åå„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Åï„Çå„Åæ„Åô<br>
                            üõ°Ô∏è ÂÆâÂÖ®: ‰∏ãÈÉ®„ÅÆ„Äå„Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞„ÄçÔºàÁ∑ëÁîªÈù¢Ôºâ„ÅØÂ§âÊõ¥„Åï„Çå„Åæ„Åõ„Çì
                        </p>
                        <div class="search-controls">
                            <input type="text" id="logSearchInput" class="form-control" placeholder="‰æã: „Ç®„É©„Éº, ÊàêÂäü, ÂàùÊúüÂåñ..." oninput="filterLogLines()">
                            <button class="btn btn-secondary" onclick="clearLogSearch()">üóëÔ∏è „ÇØ„É™„Ç¢</button>
                            <span id="searchResultCount" class="search-count">ÂÖ®„É≠„Ç∞Ë°®Á§∫‰∏≠</span>
                        </div>
                    </div>
                    
                    <!-- „É≠„Ç∞ÂÜÖÂÆπË°®Á§∫ -->
                    <div class="log-content">
                        <h4>üìÑ „É≠„Ç∞ÂÜÖÂÆπ</h4>
                        <div id="logDisplay" class="log-display">
                            „É≠„Ç∞„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ÂãïÁöÑ„Ç¢„Éó„É™„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åå„Åì„Åì„Å´ËøΩÂä†„Åï„Çå„Çã -->
        </div>

        <!-- „É≠„Ç∞„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="log-section">
            <h3>üìä „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞</h3>
            <div class="log-controls">
                <button class="btn btn-primary" onclick="runFullSystemVerification()" id="verificationBtn">üß™ ÂÖ®Ê©üËÉΩÂãï‰ΩúÁ¢∫Ë™ç</button>
                <button class="btn" onclick="downloadLogs()">üì• „É≠„Ç∞„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                <button class="btn btn-secondary" onclick="copyLogsToClipboard()">üìã „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Ç≥„Éî„Éº</button>
                <button class="btn" onclick="clearLogs()">üóëÔ∏è „É≠„Ç∞„ÇØ„É™„Ç¢</button>
                <button class="btn" onclick="refreshLogs()">üîÑ „É≠„Ç∞Êõ¥Êñ∞</button>
            </div>
            <div class="debug-logs" id="debugLogs">„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...</div>
        </div>

        <!-- Âãï‰ΩúÁ¢∫Ë™çÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="verification-section" id="verificationSection" style="display: none;">
            <h3>üß™ Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™çÁµêÊûú</h3>
            <div class="verification-status" id="verificationStatus">
                <div class="status-indicator" id="statusIndicator">Ê∫ñÂÇô‰∏≠...</div>
            </div>
            <div class="verification-details" id="verificationDetails"></div>
            <div class="verification-evidence" id="verificationEvidence"></div>
        </div>
    </div>

    <script>
        // „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ
        console.log('üöÄ Áµ±Âêà„Ç¢„Éó„É™ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã');
        
        // Âü∫Êú¨ÁöÑ„Å™Ë°®Á§∫Ê©üËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('connectionStatus').innerHTML = '<span>‚úÖ</span><span>„Ç™„É≥„É©„Ç§„É≥</span>';
            loadAndSetupDynamicTabs();
            console.log('‚úÖ ÂãïÁöÑ„Çø„ÉñË™≠„ÅøËæº„ÅøÈñãÂßã');
        });
        
        // ÂãïÁöÑ„Çø„ÉñÁîüÊàê„Å®„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
        async function loadAndSetupDynamicTabs() {
            try {
                // „Çµ„Éº„Éê„Éº„Åã„ÇâË®≠ÂÆö„Å®ÊúâÂäπ„Ç¢„Éó„É™„ÇíÂèñÂæó
                const response = await fetch('/api/config');
                if (!response.ok) {
                    throw new Error('Ë®≠ÂÆöÂèñÂæó„Å´Â§±Êïó');
                }
                
                const data = await response.json();
                const config = data.config;
                const loadedApps = data.loadedApps || [];
                
                // „Éê„Éº„Ç∏„Éß„É≥ÊÉÖÂ†±„ÇíÊõ¥Êñ∞
                updateVersionInfo(config);
                
                // ÊúâÂäπ„Ç¢„Éó„É™Êï∞„ÇíÊõ¥Êñ∞
                document.getElementById('enabledApps').textContent = `${loadedApps.length}ÂÄã`;
                
                // „Çø„Éñ„ÇíÂãïÁöÑÁîüÊàê
                generateDynamicTabs(loadedApps);
                
                // „Çø„Éñ„ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà„ÇíË®≠ÂÆö
                setupTabs();
                
                console.log(`‚úÖ ÂãïÁöÑ„Çø„ÉñÁîüÊàêÂÆå‰∫Ü | „Ç¢„Éó„É™Êï∞: ${loadedApps.length}ÂÄã`);
                
            } catch (error) {
                console.error('‚ùå ÂãïÁöÑ„Çø„ÉñÁîüÊàê„Ç®„É©„Éº:', error);
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Âü∫Êú¨„Çø„Éñ„ÅÆ„ÅøÁîüÊàê
                generateBasicTabs();
                setupTabs();
                document.getElementById('enabledApps').textContent = '0ÂÄã („Ç®„É©„Éº)';
            }
        }
        
        // „Éê„Éº„Ç∏„Éß„É≥ÊÉÖÂ†±„ÇíÊõ¥Êñ∞
        function updateVersionInfo(config) {
            const configVersion = config.version || '‰∏çÊòé';
            const serverVersion = config.serverVersion || '2.0.0'; // „Çµ„Éº„Éê„Éº„Éê„Éº„Ç∏„Éß„É≥
            
            // „Éò„ÉÉ„ÉÄ„Éº„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Éê„ÉÉ„Ç∏„ÇíÊõ¥Êñ∞
            const versionBadge = document.querySelector('.version-badge');
            if (versionBadge) {
                versionBadge.textContent = `v${configVersion}`;
            }
            
            // „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÇíÊõ¥Êñ∞
            const versionElement = document.getElementById('version');
            if (versionElement) {
                versionElement.textContent = `${configVersion} („Çµ„Éº„Éê„Éº: ${serverVersion})`;
            }
            
            console.log(`üìã „Éê„Éº„Ç∏„Éß„É≥ÊÉÖÂ†±Êõ¥Êñ∞: Config v${configVersion}, Server v${serverVersion}`);
        }
        
        // ÂãïÁöÑ„Çø„Éñ„ÇíÁîüÊàê
        function generateDynamicTabs(loadedApps) {
            const tabsContainer = document.getElementById('appTabs');
            if (!tabsContainer) {
                console.error('‚ùå „Çø„Éñ„Ç≥„É≥„ÉÜ„Éä„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            // Êó¢Â≠ò„ÅÆ„Çø„Éñ„ÇíÂâäÈô§
            tabsContainer.innerHTML = '';
            
            // Âü∫Êú¨„Çø„Éñ„ÇíÁîüÊàê
            const basicTabs = [
                { name: 'simple', icon: 'üìÑ', displayName: '„Ç∑„É≥„Éó„É´' },
                { name: 'settings', icon: '‚öôÔ∏è', displayName: 'Ë®≠ÂÆö' },
                { name: 'logs', icon: 'üìã', displayName: '„É≠„Ç∞„Éï„Ç£„É´„Çø„Éº' }
            ];
            
            basicTabs.forEach((tab, index) => {
                const tabElement = createTabElement(tab.name, tab.icon, tab.displayName, index === 0);
                tabsContainer.appendChild(tabElement);
            });
            
            // ÊúâÂäπ„Ç¢„Éó„É™„ÅÆ„Çø„Éñ„ÇíÁîüÊàêÔºàÂü∫Êú¨„Çø„Éñ„Å®ÈáçË§á„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´Ôºâ
            loadedApps.forEach(app => {
                // Âü∫Êú¨„Çø„ÉñÔºàsimple, settings, logsÔºâ„Å®ÈáçË§á„Åó„Å™„ÅÑ„Åã„ÉÅ„Çß„ÉÉ„ÇØ
                const basicTabNames = ['simple', 'settings', 'logs'];
                if (!basicTabNames.includes(app.name)) {
                    const tabElement = createTabElement(app.name, app.icon, app.displayName, false);
                    tabsContainer.appendChild(tabElement);
                    
                    // „Ç¢„Éó„É™„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢„ÇÇÁîüÊàê
                    createAppContentArea(app);
                } else {
                    console.log(`üìÑ „Çπ„Ç≠„ÉÉ„Éó: ${app.name} „ÅØÂü∫Êú¨„Çø„Éñ„ÅÆ„Åü„ÇÅÈáçË§áÂõûÈÅø`);
                }
            });
            
            console.log(`üìÑ „Çø„ÉñÁîüÊàêÂÆå‰∫Ü: Âü∫Êú¨3ÂÄã + „Ç¢„Éó„É™${loadedApps.length}ÂÄã`);
        }
        
        // Âü∫Êú¨„Çø„Éñ„ÅÆ„ÅøÁîüÊàêÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºâ
        function generateBasicTabs() {
            const tabsContainer = document.getElementById('appTabs');
            if (!tabsContainer) return;
            
            tabsContainer.innerHTML = '';
            const basicTabs = [
                { name: 'simple', icon: 'üìÑ', displayName: '„Ç∑„É≥„Éó„É´' },
                { name: 'settings', icon: '‚öôÔ∏è', displayName: 'Ë®≠ÂÆö' },
                { name: 'logs', icon: 'üìã', displayName: '„É≠„Ç∞„Éï„Ç£„É´„Çø„Éº' }
            ];
            
            basicTabs.forEach((tab, index) => {
                const tabElement = createTabElement(tab.name, tab.icon, tab.displayName, index === 0);
                tabsContainer.appendChild(tabElement);
            });
        }
        
        // „Çø„ÉñË¶ÅÁ¥†„Çí‰ΩúÊàê
        function createTabElement(name, icon, displayName, isActive = false) {
            const tab = document.createElement('button');
            tab.className = `app-tab${isActive ? ' active' : ''}`;
            tab.setAttribute('data-app', name);
            
            const iconSpan = document.createElement('span');
            iconSpan.className = 'icon';
            iconSpan.textContent = icon;
            
            const nameSpan = document.createElement('span');
            nameSpan.textContent = displayName;
            
            tab.appendChild(iconSpan);
            tab.appendChild(nameSpan);
            
            return tab;
        }
        
        // „Ç¢„Éó„É™„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢„Çí‰ΩúÊàê
        function createAppContentArea(app) {
            const mainContent = document.querySelector('.main-content');
            if (!mainContent) return;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'app-content';
            contentDiv.id = `${app.name}-content`;
            contentDiv.innerHTML = `
                <div class="welcome-content">
                    <h2>${app.icon} ${app.displayName}</h2>
                    <p>${app.description}</p>
                    <p>„Éê„Éº„Ç∏„Éß„É≥: ${app.version}</p>
                    <div class="status status-success">
                        <span>‚úÖ</span>
                        <span>„Ç¢„Éó„É™„ÅåÊ≠£Â∏∏„Å´Ë™≠„ÅøËæº„Åæ„Çå„Åæ„Åó„Åü</span>
                    </div>
                </div>
            `;
            
            mainContent.appendChild(contentDiv);
        }

        // „Çø„ÉñÂàá„ÇäÊõø„ÅàÊ©üËÉΩ
        function setupTabs() {
            document.querySelectorAll('.app-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const appName = this.getAttribute('data-app');
                    switchTab(appName);
                });
            });
        }
        
        function switchTab(appName) {
            // ÂÖ®„Çø„Éñ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÂåñ
            document.querySelectorAll('.app-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÂÖ®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫
            document.querySelectorAll('.app-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÂåñ
            const selectedTab = document.querySelector(`[data-app="${appName}"]`);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            const selectedContent = document.getElementById(`${appName}-content`);
            if (selectedContent) {
                selectedContent.style.display = 'block';
                
                // „Çø„ÉñÂàá„ÇäÊõø„ÅàÊôÇ„ÅÆÂàùÊúüÂåñÂá¶ÁêÜ
                if (appName === 'settings') {
                    loadConfigUI();
                } else if (appName === 'logs') {
                    refreshLogs();
                }
            }
            
            console.log(`üìÑ „Çø„ÉñÂàá„ÇäÊõø„Åà: ${appName}`);
        }
        
        // Ë®≠ÂÆöË™≠„ÅøËæº„ÅøÊ©üËÉΩ
        async function loadConfigUI() {
            try {
                const response = await fetch('/api/config');
                const data = await response.json();
                
                // „Ç¢„Éó„É™Ë®≠ÂÆöË°®Á§∫
                const appsContainer = document.getElementById('enabledAppsCheckboxes');
                if (appsContainer) {
                    let html = '';
                    const availableApps = {
                        'memo': { name: '„É°„É¢ÁÆ°ÁêÜ', icon: 'üìù' },
                        'money': { name: '„ÅäÈáëÁÆ°ÁêÜ', icon: 'üí∞' },
                        'time': { name: 'ÊôÇÈñìÁÆ°ÁêÜ', icon: '‚è∞' },
                        'weight': { name: '‰ΩìÈáçÁÆ°ÁêÜ', icon: '‚öñÔ∏è' },
                        'calc': { name: 'Ë®àÁÆóÊ©ü', icon: 'üßÆ' }
                    };
                    
                    Object.entries(availableApps).forEach(([key, app]) => {
                        const isEnabled = data.config.enabledApps.includes(key);
                        html += `
                            <div class="checkbox-item ${isEnabled ? 'enabled' : ''}">
                                <input type="checkbox" id="app-${key}" value="${key}" ${isEnabled ? 'checked' : ''}>
                                <label for="app-${key}">
                                    <span class="app-icon">${app.icon}</span>
                                    ${app.name}
                                </label>
                            </div>
                        `;
                    });
                    appsContainer.innerHTML = html;
                }
                
                // Ê©üËÉΩË®≠ÂÆöË°®Á§∫
                const featuresContainer = document.getElementById('featuresCheckboxes');
                if (featuresContainer) {
                    let html = '';
                    const features = {
                        'firebaseAuth': 'FirebaseË™çË®º',
                        'csvExport': 'CSVÂá∫Âäõ',
                        'debugMode': '„Éá„Éê„ÉÉ„Ç∞„É¢„Éº„Éâ'
                    };
                    
                    Object.entries(features).forEach(([key, name]) => {
                        const isEnabled = data.config.features[key];
                        html += `
                            <div class="checkbox-item ${isEnabled ? 'enabled' : ''}">
                                <input type="checkbox" id="feature-${key}" value="${key}" ${isEnabled ? 'checked' : ''}>
                                <label for="feature-${key}">${name}</label>
                            </div>
                        `;
                    });
                    featuresContainer.innerHTML = html;
                }
                
                console.log('‚öôÔ∏è Ë®≠ÂÆöË™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
            } catch (error) {
                console.error('‚ùå Ë®≠ÂÆöË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
            }
        }
        
        async function saveConfigUI() { 
            try {
                // „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„Åã„ÇâË®≠ÂÆö„ÇíÂèéÈõÜ
                const enabledApps = [];
                const enabledFeatures = {};
                
                // ÊúâÂäπ„Ç¢„Éó„É™„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                document.querySelectorAll('#enabledAppsCheckboxes input[type="checkbox"]:checked').forEach(checkbox => {
                    enabledApps.push(checkbox.value);
                });
                
                // Ê©üËÉΩË®≠ÂÆö„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                document.querySelectorAll('#featuresCheckboxes input[type="checkbox"]').forEach(checkbox => {
                    enabledFeatures[checkbox.value] = checkbox.checked;
                });
                
                // „Çµ„Éº„Éê„Éº„Å´Ë®≠ÂÆö„ÇíÈÄÅ‰ø°
                const response = await fetch('/api/config/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        enabledApps: enabledApps,
                        features: enabledFeatures
                    })
                });
                
                if (response.ok) {
                    alert('‚úÖ Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø„Åó„Å¶„Çø„Éñ„ÇíÊõ¥Êñ∞„Åó„Åæ„Åô„ÄÇ');
                    console.log('üíæ Ë®≠ÂÆö‰øùÂ≠òÂÆå‰∫Ü');
                    
                    // Ë®≠ÂÆö‰øùÂ≠òÂæå„ÄÅÂãïÁöÑ„Çø„Éñ„ÇíÊõ¥Êñ∞
                    await loadAndSetupDynamicTabs();
                    
                } else {
                    alert('‚ùå Ë®≠ÂÆö„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    console.error('üíæ Ë®≠ÂÆö‰øùÂ≠òÂ§±Êïó');
                }
                
            } catch (error) {
                alert('‚ùå Ë®≠ÂÆö‰øùÂ≠ò„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü');
                console.error('üíæ Ë®≠ÂÆö‰øùÂ≠ò„Ç®„É©„Éº:', error);
            }
        }
        
        function resetConfig() { console.log('üîÑ Ë®≠ÂÆö„É™„Çª„ÉÉ„Éà'); }
        function loadConfig() { console.log('üì• JSONË®≠ÂÆöË™≠„ÅøËæº„Åø'); }
        
        async function saveConfig() { 
            try {
                const configText = document.getElementById('configEditor').value;
                const config = JSON.parse(configText);
                
                const response = await fetch('/api/config/save-json', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(config)
                });
                
                if (response.ok) {
                    alert('‚úÖ JSONË®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ„Çµ„Éº„Éê„Éº„ÇíÂÜçËµ∑Âãï„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                    console.log('üíæ JSONË®≠ÂÆö‰øùÂ≠òÂÆå‰∫Ü');
                } else {
                    alert('‚ùå JSONË®≠ÂÆö„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    console.error('üíæ JSONË®≠ÂÆö‰øùÂ≠òÂ§±Êïó');
                }
                
            } catch (error) {
                alert('‚ùå JSONË®≠ÂÆö‰øùÂ≠ò„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü');
                console.error('üíæ JSONË®≠ÂÆö‰øùÂ≠ò„Ç®„É©„Éº:', error);
            }
        }
        
        // „É≠„Ç∞Ê©üËÉΩ - „Éê„Éº„Ç∏„Éß„É≥Ëá™ÂãïÂèñÂæó
        let currentVersion = 'ÂèñÂæó‰∏≠...';
        let systemLogs = [];
        
        // config.json„Åã„Çâ„Éê„Éº„Ç∏„Éß„É≥„ÇíÂãïÁöÑÂèñÂæó
        async function loadVersionFromConfig() {
            try {
                const response = await fetch('/config.json');
                const config = await response.json();
                currentVersion = config.version || '‰∏çÊòé';
                
                // „Éê„Éº„Ç∏„Éß„É≥ÂèñÂæóÂæå„Å´„Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞„ÇíÂàùÊúüÂåñ
                const timestamp = new Date().toTimeString().slice(0,8);
                systemLogs = [
                    `[${timestamp}] üöÄ Áµ±Âêà„Ç¢„Éó„É™ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã`,
                    `[${timestamp}] üìã Ë®≠ÂÆöË™≠„ÅøËæº„ÅøÂÆå‰∫Ü | „Éê„Éº„Ç∏„Éß„É≥: ${currentVersion}`,  
                    `[${timestamp}] üìù „É°„É¢ÁÆ°ÁêÜ„Ç¢„Éó„É™„É¢„Ç∏„É•„Éº„É´ÂàùÊúüÂåñÂÆå‰∫Ü`,
                    `[${timestamp}] ‚úÖ „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü`
                ];
                
                // „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞Ë°®Á§∫„ÇíÊõ¥Êñ∞
                refreshLogs();
                console.log(`‚úÖ „Éê„Éº„Ç∏„Éß„É≥ ${currentVersion} „ÅßÂàùÊúüÂåñÂÆå‰∫Ü`);
            } catch (error) {
                console.error('‚ùå config.jsonË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: package.json„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Çí‰ΩøÁî®
                currentVersion = '0.8'; // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÂÄ§
                
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÊôÇ„Åß„ÇÇ„Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞„ÇíÂàùÊúüÂåñ
                const timestamp = new Date().toTimeString().slice(0,8);
                systemLogs = [
                    `[${timestamp}] üöÄ Áµ±Âêà„Ç¢„Éó„É™ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã`,
                    `[${timestamp}] üìã Ë®≠ÂÆöË™≠„ÅøËæº„ÅøÂÆå‰∫Ü | „Éê„Éº„Ç∏„Éß„É≥: ${currentVersion} („Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ)`,  
                    `[${timestamp}] üìù „É°„É¢ÁÆ°ÁêÜ„Ç¢„Éó„É™„É¢„Ç∏„É•„Éº„É´ÂàùÊúüÂåñÂÆå‰∫Ü`,
                    `[${timestamp}] ‚úÖ „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü`
                ];
                
                refreshLogs();
                console.log(`‚ö†Ô∏è „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ„Åß„Éê„Éº„Ç∏„Éß„É≥ ${currentVersion} „Çí‰ΩøÁî®`);
            }
        }
        
        // ÈÅéÂéª„É≠„Ç∞„Éï„Ç°„Ç§„É´ÁÆ°ÁêÜ
        let availableLogFiles = [];
        
        async function loadLogFiles() { 
            try {
                // „Çµ„Éº„Éê„Éº„Åã„Çâ„É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇíÂèñÂæó
                const response = await fetch('/api/logs/files');
                if (response.ok) {
                    const data = await response.json();
                    availableLogFiles = data.files.map(file => file.name);
                    updateLogFileSelect();
                    console.log(`üîÑ „É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ßÊõ¥Êñ∞: ${availableLogFiles.length}‰ª∂`);
                } else {
                    console.log('üîÑ „É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ßÊõ¥Êñ∞Ôºà„Çµ„Éº„Éê„ÉºÊ©üËÉΩÊú™ÂÆüË£ÖÔºâ');
                    // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Êó¢Áü•„ÅÆ„É≠„Ç∞„Éï„Ç°„Ç§„É´ + Âãï‰ΩúÁ¢∫Ë™ç„Éï„Ç°„Ç§„É´
                    const today = new Date().toISOString().slice(0,10);
                    availableLogFiles = [
                        'test-download-2025-07-24.json',
                        'verification-result-2025-07-24.json',
                        `Âãï‰ΩúÁ¢∫Ë™ç-ÊâãÂãï-${today}.json`,
                        `Âãï‰ΩúÁ¢∫Ë™ç-Ëá™Âãï-${today}.json`
                    ];
                    updateLogFileSelect();
                }
            } catch (error) {
                console.log('üîÑ „É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ßÊõ¥Êñ∞Ôºà„Ç™„Éï„É©„Ç§„É≥Ôºâ');
                const today = new Date().toISOString().slice(0,10);
                availableLogFiles = [
                    'test-download-2025-07-24.json',
                    'verification-result-2025-07-24.json',
                    `Âãï‰ΩúÁ¢∫Ë™ç-ÊâãÂãï-${today}.json`,
                    `Âãï‰ΩúÁ¢∫Ë™ç-Ëá™Âãï-${today}.json`
                ];
                updateLogFileSelect();
            }
        }
        
        function updateLogFileSelect() {
            const select = document.getElementById('logFileSelect');
            if (select) {
                select.innerHTML = '<option value="">ÂÄãÂà•„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</option>';
                availableLogFiles.forEach(filename => {
                    const option = document.createElement('option');
                    option.value = filename;
                    option.textContent = filename;
                    select.appendChild(option);
                });
            }
        }
        
        async function loadSelectedLog() { 
            const select = document.getElementById('logFileSelect');
            const logDisplay = document.getElementById('logDisplay');
            
            if (!select.value) {
                console.log('üìÑ „É≠„Ç∞„Éï„Ç°„Ç§„É´„ÅåÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                return;
            }
            
            try {
                const response = await fetch(`/api/logs/content/${select.value}`);
                if (response.ok) {
                    const data = await response.json();
                    const logContent = data.lines.map(line => line.content).join('\n');
                    if (logDisplay) {
                        logDisplay.textContent = logContent;
                        resetFilterData(); // Êñ∞„Åó„ÅÑ„É≠„Ç∞Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„Éï„Ç£„É´„Çø„Éº„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà
                    }
                    console.log(`üìÑ ÂÄãÂà•„É≠„Ç∞Ë™≠„ÅøËæº„Åø: ${select.value}`);
                } else {
                    if (logDisplay) {
                        logDisplay.textContent = `„Ç®„É©„Éº: ${select.value} „ÇíË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü`;
                    }
                    console.error(`‚ùå „É≠„Ç∞Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº: ${select.value}`);
                }
            } catch (error) {
                if (logDisplay) {
                    logDisplay.textContent = `„Ç®„É©„Éº: ${error.message}`;
                }
                console.error('‚ùå „É≠„Ç∞Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
            }
        }
        
        async function loadAllLogs() {
            const logDisplay = document.getElementById('logDisplay');
            
            if (!logDisplay) {
                console.error('‚ùå logDisplayË¶ÅÁ¥†„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            // üõ°Ô∏è ÈáçË¶Å: „Åì„Çå„ÅØÈÅéÂéª„ÅÆ‰øùÂ≠òÊ∏à„Åø„É≠„Ç∞„Éï„Ç°„Ç§„É´„ÇíË™≠„ÅøËæº„ÇÄÊ©üËÉΩ
            // „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞(systemLogs)„Å®„ÅØÂÆåÂÖ®„Å´Âà•Áâ©
            
            logDisplay.textContent = 'üìö ÂÖ®„É≠„Ç∞„Éï„Ç°„Ç§„É´„ÇíË™≠„ÅøËæº„Åø‰∏≠...';
            
            try {
                let allLogsContent = `=== ÂÖ®„É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄÊã¨Ë°®Á§∫ ===\nüìÇ Ë™≠„ÅøËæº„Åø‰∫àÂÆö: ${availableLogFiles.length}„Éï„Ç°„Ç§„É´\n\n`;
                
                for (let i = 0; i < availableLogFiles.length; i++) {
                    const filename = availableLogFiles[i];
                    try {
                        const response = await fetch(`/api/logs/content/${filename}`);
                        if (response.ok) {
                            const data = await response.json();
                            const content = data.lines.map(line => line.content).join('\n');
                            allLogsContent += `üìÑ [${i + 1}/${availableLogFiles.length}] ${filename}\n`;
                            allLogsContent += `üìä „Çµ„Ç§„Ç∫: ${content.length}ÊñáÂ≠ó | Ë°åÊï∞: ${content.split('\n').length}Ë°å\n`;
                            allLogsContent += '‚ïê'.repeat(60) + '\n';
                            allLogsContent += content + '\n';
                            allLogsContent += '‚ïê'.repeat(60) + '\n\n';
                        }
                    } catch (error) {
                        allLogsContent += `‚ùå [${i + 1}/${availableLogFiles.length}] ${filename}: Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº\n\n`;
                    }
                }
                
                logDisplay.textContent = allLogsContent;
                resetFilterData(); // ÂÖ®„É≠„Ç∞Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„Éï„Ç£„É´„Çø„Éº„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà
                console.log(`üìö ÂÖ®„É≠„Ç∞‰∏ÄÊã¨Ë°®Á§∫ÂÆå‰∫Ü: ${availableLogFiles.length}„Éï„Ç°„Ç§„É´`);
                
            } catch (error) {
                logDisplay.textContent = `„Ç®„É©„Éº: ÂÖ®„É≠„Ç∞Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó\n${error.message}`;
                console.error('‚ùå ÂÖ®„É≠„Ç∞Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
            }
        }
        // „Éï„Ç£„É´„Çø„ÉºÁî®„Å´ÂÖÉ„É≠„Ç∞ÂÜÖÂÆπ„Çí‰øùÂ≠ò
        let originalLogContent = '';
        let filterTimeout = null;
        
        function filterLogLines() { 
            const searchTerm = document.getElementById('logSearchInput').value.toLowerCase();
            const logDisplay = document.getElementById('logDisplay');
            const searchResultCount = document.getElementById('searchResultCount');
            
            // üõ°Ô∏è ÈáçË¶Å: „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞(debugLogs)„ÅØÁµ∂ÂØæ„Å´Â§âÊõ¥„Åó„Å™„ÅÑÔºÅ
            // „Éï„Ç£„É´„Çø„Éº„ÅØ„Äå„É≠„Ç∞„Äç„Çø„Éñ„ÅÆÈÅéÂéª„É≠„Ç∞„Éï„Ç°„Ç§„É´ÂÜÖÂÆπ„ÅÆ„Åø„Å´ÈÅ©Áî®
            
            if (!logDisplay) {
                console.error('‚ùå logDisplayË¶ÅÁ¥†„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }
            
            // ÂàùÂõû„Åæ„Åü„ÅØÂÖÉ„Éá„Éº„Çø„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÅØÂÖÉ„Éá„Éº„Çø„Çí‰øùÂ≠ò
            if (!originalLogContent && logDisplay.textContent) {
                originalLogContent = logDisplay.textContent;
            }
            
            if (!searchTerm) {
                // Ê§úÁ¥¢Ë™û„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅÂÖÉ„ÅÆ„É≠„Ç∞ÂÜÖÂÆπ„ÇíÂæ©ÂÖÉ
                logDisplay.textContent = originalLogContent;
                const lineCount = originalLogContent.split('\n').length;
                if (searchResultCount) searchResultCount.textContent = `${lineCount}Ë°å`;
                console.log('üîÑ ÂÖÉ„É≠„Ç∞ÂÜÖÂÆπ„ÇíÂæ©ÂÖÉÔºàÈÅéÂéª„É≠„Ç∞„Éï„Ç°„Ç§„É´Ôºâ');
                return;
            }
            
            // ÂÖÉ„É≠„Ç∞ÂÜÖÂÆπ„Çí„Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÔºàsystemLogs„ÅØ‰Ωø„Çè„Å™„ÅÑÔºâ
            const lines = originalLogContent.split('\n');
            const filteredLines = lines.filter(line => 
                line.toLowerCase().includes(searchTerm)
            );
            
            // Ê§úÁ¥¢ÁµêÊûú„Çí„Éè„Ç§„É©„Ç§„ÉàË°®Á§∫ÔºàË¶ã„ÇÑ„Åô„ÅÑÂΩ¢Âºè„Å´Â§âÊõ¥Ôºâ
            const highlightedLines = filteredLines.map(line => {
                const regex = new RegExp(`(${searchTerm})`, 'gi');
                return line.replace(regex, '„Äê$1„Äë');
            });
            
            // Ë°®Á§∫„ÇíÊõ¥Êñ∞ÔºàÈÅéÂéª„É≠„Ç∞„Éï„Ç°„Ç§„É´ÂÜÖÂÆπ„ÅÆ„ÅøÔºâ
            if (filteredLines.length > 0) {
                // „Éï„Ç£„É´„Çø„ÉºÁµêÊûú„ÅÆÂÖàÈ†≠„Å´ÊÉÖÂ†±„ÇíËøΩÂä†
                const headerInfo = `üîç Ê§úÁ¥¢ÁµêÊûú: "${searchTerm}" (${filteredLines.length}Ë°å„Éû„ÉÉ„ÉÅ)\n` +
                                 `üìÇ ÂØæË±°: ${getCurrentLogFileName()}\n` +
                                 `‚îÄ`.repeat(50) + '\n';
                logDisplay.textContent = headerInfo + highlightedLines.join('\n');
            } else {
                logDisplay.textContent = `üîç Ê§úÁ¥¢ÁµêÊûú: "${searchTerm}" (0Ë°å„Éû„ÉÉ„ÉÅ)\n` +
                                       `üìÇ ÂØæË±°: ${getCurrentLogFileName()}\n` +
                                       `‚îÄ`.repeat(50) + '\n' +
                                       `"${searchTerm}" „Å´‰∏ÄËá¥„Åô„ÇãË°å„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`;
            }
            
            if (searchResultCount) {
                searchResultCount.textContent = `${filteredLines.length}Ë°å`;
            }
            
            // „Éá„Éê„Ç¶„É≥„Çπ: „É≠„Ç∞Âá∫Âäõ„ÇíÂà∂Èôê
            if (filterTimeout) clearTimeout(filterTimeout);
            filterTimeout = setTimeout(() => {
                console.log(`üîç ÈÅéÂéª„É≠„Ç∞Ê§úÁ¥¢: "${searchTerm}" -> ${filteredLines.length}Ë°å`);
            }, 500); // 500msÂæå„Å´„É≠„Ç∞Âá∫Âäõ
        }
        
        // „É≠„Ç∞ÂÜÖÂÆπ„ÅåÂ§âÊõ¥„Åï„Çå„Åü„ÇâÂÖÉ„Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„Éà
        function resetFilterData() {
            originalLogContent = '';
        }
        
        // ÁèæÂú®Ë°®Á§∫‰∏≠„ÅÆ„É≠„Ç∞„Éï„Ç°„Ç§„É´Âêç„ÇíÂèñÂæó
        function getCurrentLogFileName() {
            const select = document.getElementById('logFileSelect');
            if (select && select.value) {
                return select.value;
            }
            
            // ÂÖ®„É≠„Ç∞‰∏ÄÊã¨Ë°®Á§∫„ÅÆÂ†¥Âêà
            if (originalLogContent.includes('=== ÂÖ®„É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄÊã¨Ë°®Á§∫ ===')) {
                return `ÂÖ®„É≠„Ç∞„Éï„Ç°„Ç§„É´ (${availableLogFiles.length}„Éï„Ç°„Ç§„É´)`;
            }
            
            return '‰∏çÊòé„Å™„É≠„Ç∞„Éï„Ç°„Ç§„É´';
        }
        
        function clearLogSearch() { 
            document.getElementById('logSearchInput').value = '';
            filterLogLines(); // „Éï„Ç£„É´„Çø„Éº„Çí„ÇØ„É™„Ç¢
            console.log('üóëÔ∏è Ê§úÁ¥¢„ÇØ„É™„Ç¢'); 
        }
        
        function downloadLogs() { 
            try {
                // Âãï‰ΩúÁ¢∫Ë™çÁî®„ÉÜ„Çπ„Éà„Éï„Ç°„Ç§„É´„ÇíÁîüÊàêÔºàÊôÇÈñìÂê´„Åø„Éï„Ç°„Ç§„É´ÂêçÁî®Ôºâ
                const now = new Date();
                const timestamp = now.toISOString().replace(/[:.]/g, '-');
                const dateTimeString = now.toISOString().slice(0,19).replace('T', '_').replace(/:/g, '-');
                const testData = {
                    exportedAt: new Date().toISOString(),
                    version: currentVersion,
                    testPurpose: "Âãï‰ΩúÁ¢∫Ë™ç„Éª„Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÉÜ„Çπ„Éà",
                    systemLogs: systemLogs,
                    userAgent: navigator.userAgent,
                    success: true,
                    testType: "manual-download"
                };
                
                // JSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                const dataStr = JSON.stringify(testData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                
                const downloadLink = document.createElement('a');
                downloadLink.href = url;
                downloadLink.download = `test-download-${dateTimeString}.json`;
                
                // „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÇíÂÆüË°å
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
                
                // „É°„É¢„É™Ëß£Êîæ
                URL.revokeObjectURL(url);
                
                console.log(`üì• „É≠„Ç∞„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂÆå‰∫Ü: test-download-${timestamp.slice(0,10)}.json`);
            } catch (error) {
                console.error('‚ùå „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Ç®„É©„Éº:', error);
            }
        }
        function copyLogsToClipboard() { console.log('üìã „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Ç≥„Éî„Éº'); }
        function clearLogs() { 
            document.getElementById('debugLogs').textContent = '„É≠„Ç∞„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü';
            console.log('üóëÔ∏è „É≠„Ç∞„ÇØ„É™„Ç¢'); 
        }
        function refreshLogs() { 
            document.getElementById('debugLogs').textContent = systemLogs.join('\n');
            console.log('üîÑ „É≠„Ç∞Êõ¥Êñ∞'); 
        }

        // Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™ç„Ç∑„Çπ„ÉÜ„É†
        async function runFullSystemVerification() {
            const verificationSection = document.getElementById('verificationSection');
            const statusIndicator = document.getElementById('statusIndicator');
            const verificationDetails = document.getElementById('verificationDetails');
            const verificationEvidence = document.getElementById('verificationEvidence');
            const verificationBtn = document.getElementById('verificationBtn');
            
            // ÂàùÊúüÂåñ
            verificationSection.style.display = 'block';
            statusIndicator.textContent = 'üîÑ Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™çÂÆüË°å‰∏≠...';
            statusIndicator.className = 'status-indicator running';
            verificationBtn.disabled = true;
            verificationBtn.textContent = 'üîÑ Á¢∫Ë™ç‰∏≠...';
            
            console.log('üß™ Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™çÈñãÂßã');
            
            const results = {
                step1: false, // „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç
                step2: false, // ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç  
                step3: false, // „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç
                step4: false, // „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç
                overall: false
            };
            
            try {
                // STEP1: „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç
                updateVerificationStep('step1', 'running', '„Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç‰∏≠...');
                const serverCheck = await checkServerStatus();
                results.step1 = serverCheck;
                updateVerificationStep('step1', serverCheck ? 'success' : 'failed', 
                    serverCheck ? '‚úÖ „Çµ„Éº„Éê„ÉºÊ≠£Â∏∏Âãï‰Ωú' : '‚ùå „Çµ„Éº„Éê„ÉºÊé•Á∂öÂ§±Êïó');
                
                // STEP2: ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç
                updateVerificationStep('step2', 'running', 'ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç‰∏≠...');
                const commonFeaturesCheck = await checkCommonFeatures();
                results.step2 = commonFeaturesCheck;
                updateVerificationStep('step2', commonFeaturesCheck ? 'success' : 'failed',
                    commonFeaturesCheck ? '‚úÖ ÂÖ±ÈÄöÊ©üËÉΩÊ≠£Â∏∏' : '‚ùå ÂÖ±ÈÄöÊ©üËÉΩ„Ç®„É©„Éº');
                
                // STEP3: „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç
                updateVerificationStep('step3', 'running', '„Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç‰∏≠...');
                const pageCheck = await checkPageFunctions();
                results.step3 = pageCheck;
                updateVerificationStep('step3', pageCheck ? 'success' : 'failed',
                    pageCheck ? '‚úÖ „Éö„Éº„Ç∏Ê©üËÉΩÊ≠£Â∏∏' : '‚ùå „Éö„Éº„Ç∏Ê©üËÉΩ„Ç®„É©„Éº');
                
                // STEP4: „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç
                updateVerificationStep('step4', 'running', '„É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç‰∏≠...');
                const logCheck = await checkLogFunctions();
                results.step4 = logCheck;
                updateVerificationStep('step4', logCheck ? 'success' : 'failed',
                    logCheck ? '‚úÖ „É≠„Ç∞Ê©üËÉΩÊ≠£Â∏∏' : '‚ùå „É≠„Ç∞Ê©üËÉΩ„Ç®„É©„Éº');
                
                // Á∑èÂêàÂà§ÂÆö
                results.overall = results.step1 && results.step2 && results.step3 && results.step4;
                
                // ÁµêÊûúË°®Á§∫
                if (results.overall) {
                    statusIndicator.textContent = 'üéâ ÂÖ®Ê©üËÉΩÂãï‰ΩúÁ¢∫Ë™çÊàêÂäüÔºÅ';
                    statusIndicator.className = 'status-indicator success';
                } else {
                    statusIndicator.textContent = '‚ö†Ô∏è ‰∏ÄÈÉ®Ê©üËÉΩ„ÅßÂïèÈ°å„ÇíÊ§úÂá∫';
                    statusIndicator.className = 'status-indicator failed';
                }
                
                // „Ç®„Éì„Éá„É≥„ÇπÁîüÊàê
                const evidence = generateEvidence(results);
                verificationEvidence.textContent = evidence;
                
                // Âãï‰ΩúÁ¢∫Ë™çÂÆå‰∫ÜÊôÇ„Å´Ëá™Âãï„Åß„Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                await downloadVerificationResult(results, 'ÊâãÂãï');
                
                console.log('üß™ Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™çÂÆå‰∫Ü:', results);
                
            } catch (error) {
                console.error('‚ùå Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™ç„Ç®„É©„Éº:', error);
                statusIndicator.textContent = '‚ùå Âãï‰ΩúÁ¢∫Ë™ç„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü';
                statusIndicator.className = 'status-indicator failed';
                verificationEvidence.textContent = `„Ç®„É©„Éº: ${error.message}`;
            } finally {
                verificationBtn.disabled = false;
                verificationBtn.textContent = 'üß™ ÂÖ®Ê©üËÉΩÂãï‰ΩúÁ¢∫Ë™ç';
            }
        }
        
        function updateVerificationStep(stepId, status, message) {
            let stepElement = document.getElementById(stepId);
            if (!stepElement) {
                stepElement = document.createElement('div');
                stepElement.id = stepId;
                stepElement.className = 'verification-step';
                document.getElementById('verificationDetails').appendChild(stepElement);
            }
            
            stepElement.className = `verification-step ${status}`;
            stepElement.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">${getStepTitle(stepId)}</div>
                <div>${message}</div>
            `;
        }
        
        function getStepTitle(stepId) {
            const titles = {
                step1: 'STEP1: „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç',
                step2: 'STEP2: ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç',
                step3: 'STEP3: „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç',
                step4: 'STEP4: „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç'
            };
            return titles[stepId] || stepId;
        }
        
        async function checkServerStatus() {
            try {
                const response = await fetch(window.location.href);
                return response.ok;
            } catch (error) {
                return false;
            }
        }
        
        async function checkCommonFeatures() {
            try {
                // FirebaseË®≠ÂÆö„ÉÅ„Çß„ÉÉ„ÇØ
                const hasFirebase = typeof firebase !== 'undefined';
                // „É¢„Ç∏„É•„Éº„É´„É≠„Éº„ÉÄ„Éº„ÉÅ„Çß„ÉÉ„ÇØ
                const hasModuleLoader = document.querySelector('[data-module]') !== null;
                // Âü∫Êú¨UIË¶ÅÁ¥†„ÉÅ„Çß„ÉÉ„ÇØ
                const hasHeader = document.querySelector('header') !== null;
                const hasNavigation = document.querySelector('.app-tabs') !== null;
                
                return hasFirebase && hasHeader && hasNavigation;
            } catch (error) {
                return false;
            }
        }
        
        async function checkPageFunctions() {
            try {
                // „Çø„ÉñÂàá„ÇäÊõø„ÅàÊ©üËÉΩ„ÉÅ„Çß„ÉÉ„ÇØÔºàÊ≠£„Åó„ÅÑ„ÇØ„É©„ÇπÂêç„Å´‰øÆÊ≠£Ôºâ
                const tabs = document.querySelectorAll('.app-tab');
                const contents = document.querySelectorAll('.app-content');
                
                // Ë®≠ÂÆö„Éö„Éº„Ç∏„ÉÅ„Çß„ÉÉ„ÇØ
                const settingsTab = document.querySelector('[data-app="settings"]');
                const logsTab = document.querySelector('[data-app="logs"]');
                
                // „Éò„ÉÉ„ÉÄ„Éº„Å®„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥Á¢∫Ë™ç
                const header = document.querySelector('header');
                const navigation = document.querySelector('.app-tabs');
                
                console.log('üîç „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç:', {
                    tabs: tabs.length,
                    contents: contents.length,
                    settingsTab: !!settingsTab,
                    logsTab: !!logsTab,
                    header: !!header,
                    navigation: !!navigation
                });
                
                return tabs.length > 0 && contents.length > 0 && settingsTab && logsTab && header && navigation;
            } catch (error) {
                console.error('‚ùå „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç„Ç®„É©„Éº:', error);
                return false;
            }
        }
        
        async function checkLogFunctions() {
            try {
                // „É≠„Ç∞Ë°®Á§∫Ë¶ÅÁ¥†„ÉÅ„Çß„ÉÉ„ÇØ
                const logElement = document.getElementById('debugLogs');
                const logControlsExist = document.querySelector('.log-controls') !== null;
                
                // „É≠„Ç∞„Éï„Ç°„É≥„ÇØ„Ç∑„Éß„É≥„ÉÅ„Çß„ÉÉ„ÇØ
                const functionsExist = typeof downloadLogs === 'function' &&
                                     typeof clearLogs === 'function' &&
                                     typeof refreshLogs === 'function';
                
                return logElement !== null && logControlsExist && functionsExist;
            } catch (error) {
                return false;
            }
        }
        
        function generateEvidence(results) {
            const timestamp = new Date().toISOString();
            const evidence = {
                timestamp: timestamp,
                version: `v${currentVersion}`,
                testType: '„Éñ„É©„Ç¶„Ç∂Áµ±ÂêàÂãï‰ΩúÁ¢∫Ë™ç',
                results: results,
                userAgent: navigator.userAgent,
                url: window.location.href
            };
            
            return JSON.stringify(evidence, null, 2);
        }
        
        // Âãï‰ΩúÁ¢∫Ë™çÁµêÊûú„Çí„Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        async function downloadVerificationResult(results, testType) {
            try {
                const now = new Date();
                const timestamp = now.toISOString().replace(/[:.]/g, '-');
                const dateTimeStamp = now.toISOString().slice(0,19).replace('T', '_').replace(/:/g, '-'); // YYYY-MM-DD_HH-MM-SS
                
                const testData = {
                    exportedAt: new Date().toISOString(),
                    version: currentVersion,
                    testType: testType, // 'ÊâãÂãï' „Åæ„Åü„ÅØ 'Ëá™Âãï'
                    testPurpose: `${testType}Âãï‰ΩúÁ¢∫Ë™ç„ÅÆË®ºË∑°`,
                    verificationResults: results,
                    systemLogs: systemLogs,
                    userAgent: navigator.userAgent,
                    url: window.location.href,
                    overall: results.overall
                };
                
                // JSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                const dataStr = JSON.stringify(testData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                
                const downloadLink = document.createElement('a');
                downloadLink.href = url;
                downloadLink.download = `Âãï‰ΩúÁ¢∫Ë™ç-${testType}-${dateTimeStamp}.json`;
                
                // „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÇíÂÆüË°å
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
                
                // „É°„É¢„É™Ëß£Êîæ
                URL.revokeObjectURL(url);
                
                // „Çµ„Éº„Éê„Éº„Å´„ÇÇ„ÉÜ„Çπ„ÉàÁµêÊûú„Çí‰øùÂ≠ò
                await saveTestResultToServer(testData, `Âãï‰ΩúÁ¢∫Ë™ç-${testType}-${dateTimeStamp}.json`);
                
                console.log(`üì• Âãï‰ΩúÁ¢∫Ë™çÁµêÊûú„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂÆå‰∫Ü: Âãï‰ΩúÁ¢∫Ë™ç-${testType}-${dateTimeStamp}.json`);
                return `Âãï‰ΩúÁ¢∫Ë™ç-${testType}-${dateTimeStamp}.json`;
            } catch (error) {
                console.error('‚ùå Âãï‰ΩúÁ¢∫Ë™çÁµêÊûú„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Ç®„É©„Éº:', error);
                return null;
            }
        }
        
        // „ÉÜ„Çπ„ÉàÁµêÊûú„Çí„Çµ„Éº„Éê„Éº„Å´‰øùÂ≠ò
        async function saveTestResultToServer(testData, filename) {
            try {
                const response = await fetch('/api/logs/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        filename: filename,
                        data: testData,
                        testType: 'verification'
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log(`üìÅ „ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éº„Éê„Éº‰øùÂ≠òÂÆå‰∫Ü: ${filename}`);
                    
                    // „É≠„Ç∞„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇíÊõ¥Êñ∞
                    await loadLogFiles();
                    
                    return result;
                } else {
                    console.warn(`‚ö†Ô∏è „ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éº„Éê„Éº‰øùÂ≠òÂ§±Êïó: ${response.status}`);
                    return null;
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è „ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éº„Éê„Éº‰øùÂ≠ò„Ç®„É©„Éº:', error.message);
                return null;
            }
        }
        
        // Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™çÊ©üËÉΩ
        async function runAutomaticVerification() {
            console.log('ü§ñ Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™çÈñãÂßã');
            
            // Â∞ë„ÅóÂæÖ„Å£„Å¶„Åã„ÇâDOMË¶ÅÁ¥†„ÅåÁ¢∫ÂÆü„Å´Âà©Áî®ÂèØËÉΩ„Å´„Å™„Çã„Åæ„ÅßÂæÖÊ©ü
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            try {
                const results = {
                    step1: false, // „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç
                    step2: false, // ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç  
                    step3: false, // „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç
                    step4: false, // „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç
                    overall: false
                };
                
                // STEP1: „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç
                console.log('ü§ñ Ëá™ÂãïÁ¢∫Ë™ç STEP1: „Çµ„Éº„Éê„ÉºËµ∑ÂãïÁ¢∫Ë™ç');
                const serverCheck = await checkServerStatus();
                results.step1 = serverCheck;
                
                // STEP2: ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç
                console.log('ü§ñ Ëá™ÂãïÁ¢∫Ë™ç STEP2: ÂÖ±ÈÄöÊ©üËÉΩÁ¢∫Ë™ç');
                const commonFeaturesCheck = await checkCommonFeatures();
                results.step2 = commonFeaturesCheck;
                
                // STEP3: „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç
                console.log('ü§ñ Ëá™ÂãïÁ¢∫Ë™ç STEP3: „Éö„Éº„Ç∏Ê©üËÉΩÁ¢∫Ë™ç');
                const pageCheck = await checkPageFunctions();
                results.step3 = pageCheck;
                
                // STEP4: „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç
                console.log('ü§ñ Ëá™ÂãïÁ¢∫Ë™ç STEP4: „É≠„Ç∞Ê©üËÉΩÁ¢∫Ë™ç');
                const logCheck = await checkLogFunctions();
                results.step4 = logCheck;
                
                // Á∑èÂêàÂà§ÂÆö
                results.overall = results.step1 && results.step2 && results.step3 && results.step4;
                
                // Ëá™Âãï„Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                const filename = await downloadVerificationResult(results, 'Ëá™Âãï');
                
                console.log('ü§ñ Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™çÂÆå‰∫Ü:', results);
                console.log(`üìÅ „Ç®„Éì„Éá„É≥„Çπ„Éï„Ç°„Ç§„É´: ${filename}`);
                
                return results;
            } catch (error) {
                console.error('‚ùå Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™ç„Ç®„É©„Éº:', error);
                return null;
            }
        }
        
        // DOMË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ„ÇíÂÆüË°å
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOMË™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
            loadVersionFromConfig();
            loadLogFiles();
            
            // Ê≥®ÊÑè: Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™ç„ÅØClaudeÂÅ¥„Åßautomated-verification.js„ÇíÁõ¥Êé•ÂÆüË°å
            // Web„Éö„Éº„Ç∏„Åß„ÅØËá™ÂãïÂÆüË°å„Åõ„Åö„ÄÅÊâãÂãï„Éú„Çø„É≥„ÅÆ„ÅøÊèê‰æõ
        });
        
        console.log('‚úÖ „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂÆå‰∫Ü - v0.8Ëá™ÂãïÂãï‰ΩúÁ¢∫Ë™çÁâà„ÉªË®ºË∑°„Éï„Ç°„Ç§„É´ÁîüÊàêÂØæÂøú');
    </script>
</body>
</html>
