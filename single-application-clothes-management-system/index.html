<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ çµ±åˆã‚¢ãƒ—ãƒªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  v1.0</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --warning: #FF9800;
            --danger: #f44336;
            --success: #4CAF50;
            --bg: #f8f9fa;
            --surface: #fff;
            --text: #333;
            --text-light: #666;
            --border: #ddd;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px), (max-height: 1024px) and (orientation: portrait) {
            .container {
                padding: 10px;
            }
            
            header {
                padding: 15px;
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            h1 {
                font-size: 1.4rem;
            }
            
            .user-info {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
        }

        h1 {
            color: var(--primary);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .version-badge {
            background: var(--secondary);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: normal;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .auth-btn:hover {
            opacity: 0.9;
        }

        /* ã‚¢ãƒ—ãƒªã‚¿ãƒ– */

        .app-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-light);
            font-size: 14px;
            white-space: nowrap;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        /* ã‚«ãƒ¼ãƒ‰å‹ã‚¿ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .app-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 10px;
            -webkit-overflow-scrolling: touch;
        }

        .app-tab {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 16px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        /* å„ã‚¿ãƒ–ã®è‰² */
        .app-tab[data-app="welcome"] { background: linear-gradient(135deg, #6366f1, #4f46e5); }
        .app-tab[data-app="money"] { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .app-tab[data-app="weight"] { background: linear-gradient(135deg, #a855f7, #9333ea); }
        .app-tab[data-app="memo"] { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .app-tab[data-app="calc"] { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .app-tab[data-app="sleep"] { background: linear-gradient(135deg, #06b6d4, #0891b2); }
        .app-tab[data-app="settings"] { background: linear-gradient(135deg, #64748b, #475569); }

        .app-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.2);
        }

        .app-tab.active {
            border: 3px solid #1e293b;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .app-tab .icon {
            font-size: 18px;
        }

        .app-tab span:last-child {
            font-size: 12px;
            opacity: 0.9;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .app-tab {
                min-width: 80px;
                padding: 12px 8px;
            }
            
            .app-tab span:last-child {
                display: none;
            }
        }


        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-content {
            background: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            min-height: 500px;
        }

        .app-content {
            display: none;
            padding: 20px;
        }

        .app-content.active {
            display: block;
        }

        .welcome-content {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .welcome-content p {
            color: var(--text-light);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        /* ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± */
        .system-info {
            background: var(--bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-card {
            background: var(--surface);
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid var(--primary);
        }

        .info-card h4 {
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .info-card p {
            color: var(--text);
            font-weight: 500;
        }

        /* ãƒœã‚¿ãƒ³ */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: opacity 0.3s;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-danger {
            background: var(--danger);
        }

        /* ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .log-section {
            margin-top: 20px;
        }

        .log-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .debug-logs {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-line;
        }

        /* è¨­å®šãƒ‘ãƒãƒ« */
        .settings-panel {
            background: var(--bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        /* ãŠé‡‘ç®¡ç†ç”»é¢ */
        .money-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .input-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .input-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .form-control {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            flex: 1;
            min-width: 120px;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        .transaction-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .transactions-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-income {
            border-left: 4px solid var(--success);
        }

        .transaction-expense {
            border-left: 4px solid var(--danger);
        }

        /* æ™‚é–“ç®¡ç†ãƒ»ä½“é‡ç®¡ç†ç”»é¢ */
        .time-panel, .weight-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .timer-section, .bmi-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }

        .timer-display, .bmi-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            margin: 10px 0;
        }

        .timer-clock {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            margin: 15px 0;
        }

        .timer-task {
            font-size: 1.1rem;
            color: #666;
            margin-top: 10px;
        }

        .bmi-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .bmi-status {
            font-size: 1.2rem;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .bmi-underweight { background: #e3f2fd; color: #1976d2; }
        .bmi-normal { background: #e8f5e8; color: #388e3c; }
        .bmi-overweight { background: #fff3e0; color: #f57c00; }
        .bmi-obese { background: #ffebee; color: #d32f2f; }

        .time-list, .weight-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .records-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }

        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
        }

        .record-item:last-child {
            border-bottom: none;
        }

        .record-work { border-left: 4px solid #2196F3; }
        .record-study { border-left: 4px solid #4CAF50; }
        .record-exercise { border-left: 4px solid #FF9800; }
        .record-break { border-left: 4px solid #9C27B0; }
        .record-other { border-left: 4px solid #607D8B; }

        /* ãƒ¡ãƒ¢ç®¡ç†ç”»é¢ */
        .memo-panel {
            background: var(--surface);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .memo-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
        }

        .memo-display {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }

        .memo-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .memo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .memo-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }

        .memo-category {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .memo-content {
            margin: 10px 0;
            line-height: 1.5;
            color: #555;
            white-space: pre-wrap;
        }

        .memo-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }

        .memo-tags {
            display: flex;
            gap: 5px;
        }

        .memo-tag {
            background: #e9ecef;
            color: #495057;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .memo-delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .memo-delete-btn:hover {
            opacity: 0.8;
        }

        /* è¨ˆç®—æ©Ÿã‚¹ã‚¿ã‚¤ãƒ« */
        .calc-form {
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .calc-input-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calc-input {
            width: 120px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .calc-operator, .calc-equals {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            min-width: 30px;
            text-align: center;
        }

        .calc-result {
            font-size: 24px;
            font-weight: bold;
            color: var(--success);
            min-width: 100px;
            background: var(--bg);
            padding: 8px 15px;
            border-radius: 6px;
            border: 2px solid var(--success);
            text-align: center;
        }

        .calc-button-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calc-btn {
            background: var(--primary);
            font-size: 16px;
            font-weight: bold;
            min-width: 120px;
        }

        .calc-history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--surface);
        }

        .calc-history-item {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .calc-history-item:last-child {
            border-bottom: none;
        }

        .calc-history-item:hover {
            background: var(--bg);
        }

        .calc-expression {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
        }

        .calc-timestamp {
            color: var(--text-light);
            font-size: 12px;
        }

        .calc-delete-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .calc-delete-btn:hover {
            opacity: 0.8;
        }

        .config-editor {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            width: 100%;
            min-height: 200px;
            resize: vertical;
        }

        /* ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« */
        .system-info-table {
            margin-top: 10px;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
            font-size: 0.9rem;
        }

        .info-table td {
            padding: 8px 12px;
            border-right: 1px solid var(--border);
        }

        .info-table td:last-child {
            border-right: none;
        }

        .info-table td:nth-child(odd) {
            background: var(--bg);
            white-space: nowrap;
        }

        /* è¨­å®šç®¡ç†UI */
        .config-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .checkbox-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--bg);
            transition: background-color 0.2s;
        }

        .checkbox-item:hover {
            background: #f0f0f0;
        }

        .checkbox-item input[type="checkbox"] {
            margin: 0;
            transform: scale(1.1);
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            font-weight: normal;
        }

        .checkbox-item.enabled {
            background: #e8f5e8;
            border-color: var(--success);
        }

        .app-icon {
            font-size: 16px;
            margin-right: 4px;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            .app-tabs {
                flex-direction: column;
            }
            
            .app-tab {
                justify-content: center;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .status-success {
            background: #e8f5e8;
            color: #2e7d2e;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header>
            <h1>
                ğŸš€ çµ±åˆã‚¢ãƒ—ãƒªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
                <span class="version-badge">v1.0</span>
            </h1>
            <div class="user-info" id="userInfo">
                <div class="status" id="connectionStatus">
                    <span class="loading"></span>
                    <span>æ¥ç¶šä¸­...</span>
                </div>
                <button class="auth-btn" id="authBtn">Googleã§ãƒ­ã‚°ã‚¤ãƒ³</button>
            </div>
        </header>

        <!-- ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± -->
        <div class="system-info">
            <h3>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h3>
            <div class="system-info-table">
                <table class="info-table">
                    <tr>
                        <td><strong>ã‚¢ãƒ—ãƒª:</strong></td>
                        <td id="appName">èª­ã¿è¾¼ã¿ä¸­...</td>
                        <td><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong></td>
                        <td id="version">èª­ã¿è¾¼ã¿ä¸­...</td>
                        <td><strong>æœ‰åŠ¹ã‚¢ãƒ—ãƒª:</strong></td>
                        <td id="enabledApps">5ã‚¢ãƒ—ãƒª</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- ã‚¢ãƒ—ãƒªã‚¿ãƒ– -->
        <div class="app-tabs" id="appTabs">
            <button class="app-tab active" data-app="welcome" onclick="app.switchApp('welcome')">
                <span class="icon">ğŸ </span>
                <span>ãƒ›ãƒ¼ãƒ </span>
            </button>
            <button class="app-tab" data-app="money" onclick="app.switchApp('money')">
                <span class="icon">ğŸ’°</span>
                <span>ãŠé‡‘ç®¡ç†</span>
            </button>
            <button class="app-tab" data-app="weight" onclick="app.switchApp('weight')">
                <span class="icon">âš–ï¸</span>
                <span>ä½“é‡ç®¡ç†</span>
            </button>
            <button class="app-tab" data-app="memo" onclick="app.switchApp('memo')">
                <span class="icon">ğŸ“</span>
                <span>ãƒ¡ãƒ¢ç®¡ç†</span>
            </button>
            <button class="app-tab" data-app="calc" onclick="app.switchApp('calc')">
                <span class="icon">ğŸ§®</span>
                <span>è¨ˆç®—æ©Ÿ</span>
            </button>
            <button class="app-tab" data-app="sleep" onclick="app.switchApp('sleep')">
                <span class="icon">ğŸ’¤</span>
                <span>ç¡çœ ç®¡ç†</span>
            </button>
            <button class="app-tab" data-app="clothes" onclick="app.switchApp('clothes')">
                <span class="icon">ğŸ‘•</span>
                <span>æœã®ç®¡ç†</span>
            </button>
            <button class="app-tab" data-app="settings" onclick="app.switchApp('settings')">
                <span class="icon">âš™ï¸</span>
                <span>è¨­å®š</span>
            </button>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="main-content">
            <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢ -->
            <div class="app-content active" id="welcome-content">
                <div class="welcome-content">
                    <h2>ğŸ‰ ã‚ˆã†ã“ãï¼</h2>
                    <p>çµ±åˆã‚¢ãƒ—ãƒªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¸ã‚ˆã†ã“ãã€‚<br>
                    è¨­å®šã•ã‚ŒãŸã‚¢ãƒ—ãƒªã®ã‚¿ãƒ–ãŒä¸Šã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                    
                    <div class="log-controls">
                        <button class="btn" onclick="testAPI()">ğŸ”— API ãƒ†ã‚¹ãƒˆ</button>
                        <button class="btn btn-warning" onclick="generateSampleData()">ğŸ¯ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿</button>
                    </div>
                </div>
            </div>

            <!-- è¨­å®šç”»é¢ -->
            <div class="app-content" id="settings-content">
                <div class="settings-panel">
                    <h3>âš™ï¸ è¨­å®šç®¡ç†</h3>
                    <p>config.json ã®å†…å®¹ã‚’ç·¨é›†ã§ãã¾ã™ã€‚å¤‰æ›´å¾Œã¯ã€Œè¨­å®šã‚’ä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
                    
                    <!-- ã‚¢ãƒ—ãƒªæœ‰åŠ¹åŒ–è¨­å®š -->
                    <div class="config-section">
                        <h4>ğŸ“± æœ‰åŠ¹ãªã‚¢ãƒ—ãƒª</h4>
                        <div class="checkbox-list" id="enabledAppsCheckboxes">
                            <div class="loading">è¨­å®šã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                        </div>
                    </div>

                    <!-- æ©Ÿèƒ½è¨­å®š -->
                    <div class="config-section">
                        <h4>âš™ï¸ æ©Ÿèƒ½è¨­å®š</h4>
                        <div class="checkbox-list" id="featuresCheckboxes">
                            <div class="loading">è¨­å®šã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                        </div>
                    </div>

                    <!-- ä¿å­˜ãƒ»ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
                    <div style="margin: 20px 0;">
                        <button class="btn" onclick="loadConfigUI()">ğŸ“¥ è¨­å®šèª­ã¿è¾¼ã¿</button>
                        <button class="btn btn-secondary" onclick="saveConfigUI()">ğŸ’¾ è¨­å®šä¿å­˜</button>
                        <button class="btn btn-warning" onclick="resetConfig()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                    
                    <!-- é«˜åº¦ãªè¨­å®šï¼ˆJSONç·¨é›†ï¼‰ -->
                    <div class="config-section">
                        <h4>ğŸ”§ é«˜åº¦ãªè¨­å®š (JSON)</h4>
                        <details>
                            <summary>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘è¨­å®šç·¨é›†</summary>
                            <textarea class="config-editor" id="configEditor" placeholder="è¨­å®šã‚’èª­ã¿è¾¼ã¿ä¸­..."></textarea>
                            <div style="margin-top: 10px;">
                                <button class="btn btn-secondary" onclick="loadConfig()">ğŸ“¥ JSONèª­ã¿è¾¼ã¿</button>
                                <button class="btn btn-secondary" onclick="saveConfig()">ğŸ’¾ JSONä¿å­˜</button>
                            </div>
                        </details>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <div class="status status-warning">
                            <span>âš ï¸</span>
                            <span>è¨­å®šå¤‰æ›´å¾Œã¯ã‚µãƒ¼ãƒãƒ¼ã®å†èµ·å‹•ãŒå¿…è¦ã§ã™</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å‹•çš„ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã‚‹ -->
            
            <!-- ãŠé‡‘ç®¡ç†ç”»é¢ -->
            <div class="app-content" id="money-content" style="display: none;">
                <div class="money-panel">
                    <h3>ğŸ’° ãŠé‡‘ç®¡ç†</h3>
                    
                    <!-- åæ”¯å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ“ åæ”¯è¨˜éŒ²</h4>
                        <div class="input-form">
                            <div class="form-row">
                                <select id="money-type" class="form-control">
                                    <option value="income">åå…¥</option>
                                    <option value="expense">æ”¯å‡º</option>
                                </select>
                                <input type="number" id="money-amount" class="form-control" placeholder="é‡‘é¡" min="0">
                            </div>
                            <div class="form-row">
                                <select id="money-category" class="form-control">
                                    <option value="çµ¦ä¸">çµ¦ä¸</option>
                                    <option value="å‰¯æ¥­">å‰¯æ¥­</option>
                                    <option value="ãƒœãƒ¼ãƒŠã‚¹">ãƒœãƒ¼ãƒŠã‚¹</option>
                                    <option value="é£Ÿè²»">é£Ÿè²»</option>
                                    <option value="äº¤é€šè²»">äº¤é€šè²»</option>
                                    <option value="å¨¯æ¥½è²»">å¨¯æ¥½è²»</option>
                                    <option value="å…‰ç†±è²»">å…‰ç†±è²»</option>
                                    <option value="å®¶è³ƒ">å®¶è³ƒ</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                                <input type="text" id="money-description" class="form-control" placeholder="èª¬æ˜ï¼ˆä»»æ„ï¼‰">
                            </div>
                            <div class="form-row">
                                <input type="date" id="money-date" class="form-control">
                                <button class="btn" onclick="addMoneyTransaction()">ğŸ’¾ è¨˜éŒ²</button>
                                <button class="btn btn-secondary" onclick="exportMoneyCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å–å¼•ä¸€è¦§ -->
                    <div class="transaction-list">
                        <h4>ğŸ“Š å–å¼•å±¥æ­´</h4>
                        <div id="money-transactions" class="transactions-display">
                            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ™‚é–“ç®¡ç†ç”»é¢ -->
            <div class="app-content" id="time-content" style="display: none;">
                <div class="time-panel">
                    <h3>â° æ™‚é–“ç®¡ç†</h3>
                    
                    <!-- æ™‚é–“è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ“ æ™‚é–“è¨˜éŒ²</h4>
                        <div class="input-form">
                            <div class="form-row">
                                <input type="text" id="time-task" class="form-control" placeholder="ã‚¿ã‚¹ã‚¯å">
                                <select id="time-category" class="form-control">
                                    <option value="ä»•äº‹">ä»•äº‹</option>
                                    <option value="å‹‰å¼·">å‹‰å¼·</option>
                                    <option value="é‹å‹•">é‹å‹•</option>
                                    <option value="ä¼‘æ†©">ä¼‘æ†©</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <input type="number" id="time-hours" class="form-control" placeholder="æ™‚é–“" min="0" max="24">
                                <input type="number" id="time-minutes" class="form-control" placeholder="åˆ†" min="0" max="59">
                                <input type="date" id="time-date" class="form-control">
                            </div>
                            <div class="form-row">
                                <button class="btn" onclick="addTimeRecord()">ğŸ’¾ è¨˜éŒ²</button>
                                <button class="btn btn-secondary" onclick="exportTimeCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
                                <button class="btn btn-warning" onclick="startTimer()">â±ï¸ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º -->
                    <div class="timer-section" id="timer-section" style="display: none;">
                        <h4>â±ï¸ ã‚¿ã‚¤ãƒãƒ¼</h4>
                        <div class="timer-display">
                            <div id="timer-display" class="timer-clock">00:00:00</div>
                            <div class="timer-controls">
                                <button class="btn" onclick="pauseTimer()">â¸ï¸ ä¸€æ™‚åœæ­¢</button>
                                <button class="btn btn-danger" onclick="stopTimer()">â¹ï¸ åœæ­¢</button>
                            </div>
                            <div id="timer-task-name" class="timer-task"></div>
                        </div>
                    </div>
                    
                    <!-- æ™‚é–“è¨˜éŒ²ä¸€è¦§ -->
                    <div class="time-list">
                        <h4>ğŸ“Š æ™‚é–“è¨˜éŒ²å±¥æ­´</h4>
                        <div id="time-records" class="records-display">
                            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ä½“é‡ç®¡ç†ç”»é¢ -->
            <div class="app-content" id="weight-content" style="display: none;">
                <div class="weight-panel">
                    <h3>âš–ï¸ ä½“é‡ç®¡ç†</h3>
                    
                    <!-- ä½“é‡è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ“ ä½“é‡è¨˜éŒ²</h4>
                        <div class="input-form">
                            <div class="form-row">
                                <input type="number" id="weight-value" class="form-control" placeholder="ä½“é‡ (kg)" step="0.1" min="20" max="300">
                                <input type="number" id="weight-height" class="form-control" placeholder="èº«é•· (cm)" min="100" max="250">
                                <input type="date" id="weight-date" class="form-control">
                            </div>
                            <div class="form-row">
                                <textarea id="weight-memo" class="form-control" placeholder="ãƒ¡ãƒ¢ï¼ˆä½“èª¿ãƒ»é£Ÿäº‹ãªã©ï¼‰" rows="2"></textarea>
                            </div>
                            <div class="form-row">
                                <button class="btn" onclick="addWeightRecord()">ğŸ’¾ è¨˜éŒ²</button>
                                <button class="btn btn-secondary" onclick="exportWeightCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
                                <button class="btn btn-warning" onclick="calculateBMI()">ğŸ“Š BMIè¨ˆç®—</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- BMIè¡¨ç¤º -->
                    <div class="bmi-section" id="bmi-section" style="display: none;">
                        <h4>ğŸ“Š BMIè¨ˆç®—çµæœ</h4>
                        <div class="bmi-display">
                            <div id="bmi-result" class="bmi-value"></div>
                            <div id="bmi-status" class="bmi-status"></div>
                        </div>
                    </div>
                    
                    <!-- ä½“é‡è¨˜éŒ²ä¸€è¦§ -->
                    <div class="weight-list">
                        <h4>ğŸ“Š ä½“é‡è¨˜éŒ²å±¥æ­´</h4>
                        <div id="weight-records" class="records-display">
                            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ãƒ¡ãƒ¢ç®¡ç†ç”»é¢ -->
            <div class="app-content" id="memo-content" style="display: none;">
                <div class="memo-panel">
                    <h3>ğŸ“ ãƒ¡ãƒ¢ç®¡ç†</h3>
                    
                    <!-- ãƒ¡ãƒ¢ä½œæˆãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ“ ãƒ¡ãƒ¢ä½œæˆ</h4>
                        <div class="input-form">
                            <div class="form-row">
                                <input type="text" id="memo-title" class="form-control" placeholder="ã‚¿ã‚¤ãƒˆãƒ«">
                                <select id="memo-category" class="form-control">
                                    <option value="ä»•äº‹">ä»•äº‹</option>
                                    <option value="ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ</option>
                                    <option value="å­¦ç¿’">å­¦ç¿’</option>
                                    <option value="ã‚¢ã‚¤ãƒ‡ã‚¢">ã‚¢ã‚¤ãƒ‡ã‚¢</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <textarea id="memo-textarea" class="form-control" placeholder="ãƒ¡ãƒ¢å†…å®¹" rows="4"></textarea>
                            </div>
                            <div class="form-row">
                                <input type="text" id="memo-tags" class="form-control" placeholder="ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰">
                                <button class="btn" onclick="addMemo()">ğŸ’¾ ä¿å­˜</button>
                                <button class="btn btn-secondary" onclick="exportMemoCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ãƒ¡ãƒ¢ä¸€è¦§ -->
                    <div class="memo-list">
                        <h4>ğŸ“Š ãƒ¡ãƒ¢ä¸€è¦§</h4>
                        <div id="memo-records" class="memo-display">
                            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è¨ˆç®—æ©Ÿç”»é¢ -->
            <div class="app-content" id="calc-content" style="display: none;">
                <div class="calc-panel">
                    <h3>ğŸ§® è¨ˆç®—æ©Ÿ</h3>
                    
                    <!-- è¨ˆç®—å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ§® æ•°å€¤è¨ˆç®—</h4>
                        <div class="calc-form">
                            <div class="calc-input-row">
                                <input type="number" id="calc-number-a" class="form-control calc-input" placeholder="æ•°å€¤A" step="any">
                                <span class="calc-operator">+</span>
                                <input type="number" id="calc-number-b" class="form-control calc-input" placeholder="æ•°å€¤B" step="any">
                                <span class="calc-equals">=</span>
                                <span id="calc-result" class="calc-result">?</span>
                            </div>
                            <div class="calc-button-row">
                                <button class="btn calc-btn" onclick="calculateNumbers()">ğŸ§® è¨ˆç®—å®Ÿè¡Œ</button>
                                <button class="btn btn-secondary" onclick="clearCalculation()">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</button>
                                <button class="btn btn-secondary" onclick="exportCalcCSV()">ğŸ“¥ å±¥æ­´CSVå‡ºåŠ›</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¨ˆç®—å±¥æ­´ -->
                    <div class="calc-history-section">
                        <h4>ğŸ“Š è¨ˆç®—å±¥æ­´</h4>
                        <div id="calc-history-list" class="calc-history-list">
                            <div class="loading">å±¥æ­´ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æœã®ç®¡ç†ç”»é¢ -->
            <div class="app-content" id="clothes-content" style="display: none;">
                <div class="clothes-panel">
                    <h3>ğŸ‘• æœã®ç®¡ç†</h3>
                    
                    <!-- è¡£é¡ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="input-section">
                        <h4>ğŸ“ è¡£é¡ç™»éŒ²</h4>
                        <div class="input-form">
                            <div class="form-row">
                                <select id="clothes-type" class="form-control">
                                    <option value="">ç¨®åˆ¥ã‚’é¸æŠ</option>
                                    <option value="ã‚³ãƒ¼ãƒˆ">ã‚³ãƒ¼ãƒˆ</option>
                                    <option value="ã‚¸ãƒ£ã‚±ãƒƒãƒˆ">ã‚¸ãƒ£ã‚±ãƒƒãƒˆ</option>
                                    <option value="ã‚·ãƒ£ãƒ„">ã‚·ãƒ£ãƒ„</option>
                                    <option value="Tã‚·ãƒ£ãƒ„">Tã‚·ãƒ£ãƒ„</option>
                                    <option value="ãƒ–ãƒ©ã‚¦ã‚¹">ãƒ–ãƒ©ã‚¦ã‚¹</option>
                                    <option value="ã‚ºãƒœãƒ³">ã‚ºãƒœãƒ³</option>
                                    <option value="ã‚¸ãƒ¼ãƒ³ã‚º">ã‚¸ãƒ¼ãƒ³ã‚º</option>
                                    <option value="ã‚¹ã‚«ãƒ¼ãƒˆ">ã‚¹ã‚«ãƒ¼ãƒˆ</option>
                                    <option value="ãƒ‰ãƒ¬ã‚¹">ãƒ‰ãƒ¬ã‚¹</option>
                                    <option value="ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹">ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹</option>
                                    <option value="ã‚¢ã‚¦ã‚¿ãƒ¼">ã‚¢ã‚¦ã‚¿ãƒ¼</option>
                                    <option value="ã‚¤ãƒ³ãƒŠãƒ¼">ã‚¤ãƒ³ãƒŠãƒ¼</option>
                                    <option value="ä¸‹ç€">ä¸‹ç€</option>
                                    <option value="é´ä¸‹">é´ä¸‹</option>
                                    <option value="å¸½å­">å¸½å­</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                                <select id="clothes-color" class="form-control">
                                    <option value="">è‰²ã‚’é¸æŠ</option>
                                    <option value="é»’">é»’</option>
                                    <option value="ç™½">ç™½</option>
                                    <option value="ã‚°ãƒ¬ãƒ¼">ã‚°ãƒ¬ãƒ¼</option>
                                    <option value="èŒ¶è‰²">èŒ¶è‰²</option>
                                    <option value="ãƒ™ãƒ¼ã‚¸ãƒ¥">ãƒ™ãƒ¼ã‚¸ãƒ¥</option>
                                    <option value="èµ¤">èµ¤</option>
                                    <option value="ãƒ”ãƒ³ã‚¯">ãƒ”ãƒ³ã‚¯</option>
                                    <option value="ã‚ªãƒ¬ãƒ³ã‚¸">ã‚ªãƒ¬ãƒ³ã‚¸</option>
                                    <option value="é»„è‰²">é»„è‰²</option>
                                    <option value="ç·‘">ç·‘</option>
                                    <option value="é’">é’</option>
                                    <option value="ç´º">ç´º</option>
                                    <option value="ç´«">ç´«</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <select id="clothes-season" class="form-control">
                                    <option value="">å­£ç¯€ã‚’é¸æŠ</option>
                                    <option value="æ˜¥">æ˜¥</option>
                                    <option value="å¤">å¤</option>
                                    <option value="ç§‹">ç§‹</option>
                                    <option value="å†¬">å†¬</option>
                                    <option value="ã‚ªãƒ¼ãƒ«ã‚·ãƒ¼ã‚ºãƒ³">ã‚ªãƒ¼ãƒ«ã‚·ãƒ¼ã‚ºãƒ³</option>
                                </select>
                                <select id="clothes-size" class="form-control">
                                    <option value="">ã‚µã‚¤ã‚ºã‚’é¸æŠ</option>
                                    <option value="XS">XS</option>
                                    <option value="S">S</option>
                                    <option value="M">M</option>
                                    <option value="L">L</option>
                                    <option value="XL">XL</option>
                                    <option value="XXL">XXL</option>
                                    <option value="ãƒ•ãƒªãƒ¼">ãƒ•ãƒªãƒ¼</option>
                                </select>
                                <input type="number" id="clothes-quantity" class="form-control" placeholder="æ•°é‡" min="1" max="999">
                            </div>
                            <div class="form-row">
                                <input type="text" id="clothes-brand" class="form-control" placeholder="ãƒ–ãƒ©ãƒ³ãƒ‰ï¼ˆä»»æ„ï¼‰">
                                <textarea id="clothes-notes" class="form-control" placeholder="ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰" rows="2"></textarea>
                            </div>
                            <div class="form-row">
                                <button class="btn" onclick="addClothes()">ğŸ‘• è¨˜éŒ²</button>
                                <button class="btn btn-secondary" onclick="exportClothesCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
                                <button class="btn btn-warning" onclick="loadClothesStats()">ğŸ“Š çµ±è¨ˆè¡¨ç¤º</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- çµ±è¨ˆè¡¨ç¤º -->
                    <div class="stats-section" id="clothes-stats-section" style="display: none;">
                        <h4>ğŸ“Š è¡£é¡çµ±è¨ˆ</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h5>ç¨®åˆ¥åˆ¥</h5>
                                <div id="stats-by-type">èª­ã¿è¾¼ã¿ä¸­...</div>
                            </div>
                            <div class="stat-card">
                                <h5>è‰²åˆ¥</h5>
                                <div id="stats-by-color">èª­ã¿è¾¼ã¿ä¸­...</div>
                            </div>
                            <div class="stat-card">
                                <h5>å­£ç¯€åˆ¥</h5>
                                <div id="stats-by-season">èª­ã¿è¾¼ã¿ä¸­...</div>
                            </div>
                            <div class="stat-card">
                                <h5>ã‚µã‚¤ã‚ºåˆ¥</h5>
                                <div id="stats-by-size">èª­ã¿è¾¼ã¿ä¸­...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¡£é¡ä¸€è¦§ -->
                    <div class="clothes-list">
                        <h4>ğŸ“Š è¡£é¡ä¸€è¦§</h4>
                        <div id="clothes-records" class="records-display">
                            ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="log-section">
            <h3>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°</h3>
            <div class="log-controls">
                <button class="btn" onclick="downloadLogs()">ğŸ“¥ ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                <button class="btn btn-secondary" onclick="copyLogsToClipboard()">ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼</button>
                <button class="btn" onclick="clearLogs()">ğŸ—‘ï¸ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
                <button class="btn" onclick="refreshLogs()">ğŸ”„ ãƒ­ã‚°æ›´æ–°</button>
            </div>
            <div class="debug-logs" id="debugLogs">ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...</div>
        </div>
    </div>

    <script>
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹
        class SmartTemplateApp {
            constructor() {
                this.currentUser = null;
                this.currentApp = 'welcome';
                this.config = null;
                this.loadedApps = [];
                this.logs = [];
                
                this.setupEventListeners();
                this.initialize();
                
                this.log('ğŸš€ çµ±åˆã‚¢ãƒ—ãƒªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  v1.0 åˆæœŸåŒ–å®Œäº†');
            }

            async initialize() {
                try {
                    // Firebaseè¨­å®šèª­ã¿è¾¼ã¿
                    await this.loadFirebaseConfig();
                    
                    // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±èª­ã¿è¾¼ã¿
                    await this.loadSystemInfo();
                    
                    // è¨­å®šèª­ã¿è¾¼ã¿
                    await this.loadAppConfig();
                    
                    // èªè¨¼è¨­å®š
                    this.setupAuth();
                    
                    this.updateConnectionStatus('success', 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³');
                    this.log('âœ… åˆæœŸåŒ–å®Œäº†');
                    
                } catch (error) {
                    this.updateConnectionStatus('error', 'åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼');
                    this.log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // Firebaseè¨­å®šèª­ã¿è¾¼ã¿
            async loadFirebaseConfig() {
                try {
                    const response = await fetch('/api/firebase-config');
                    const firebaseConfig = await response.json();
                    
                    firebase.initializeApp(firebaseConfig);
                    this.auth = firebase.auth();
                    this.database = firebase.database();
                    
                    this.log('ğŸ”¥ FirebaseåˆæœŸåŒ–å®Œäº†');
                } catch (error) {
                    this.log(`âŒ FirebaseåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±èª­ã¿è¾¼ã¿
            async loadSystemInfo() {
                try {
                    const response = await fetch('/api/info');
                    const info = await response.json();
                    
                    document.getElementById('appName').textContent = info.appName;
                    document.getElementById('version').textContent = `v${info.version}`;
                    document.getElementById('uptime').textContent = `${Math.floor(info.uptime / 60)}åˆ†`;
                    
                    if (info.moduleLoader) {
                        document.getElementById('enabledApps').textContent = 
                            `${info.moduleLoader.loadedAppsCount}å€‹`;
                    }
                    
                    this.log('ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±èª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    this.log(`âŒ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ã‚¢ãƒ—ãƒªè¨­å®šèª­ã¿è¾¼ã¿
            async loadAppConfig() {
                try {
                    const response = await fetch('/api/config');
                    const data = await response.json();
                    
                    this.config = data.config;
                    this.loadedApps = data.loadedApps || [];
                    
                    this.setupAppTabs();
                    this.log(`ğŸ“‹ è¨­å®šèª­ã¿è¾¼ã¿å®Œäº† | ${this.loadedApps.length}å€‹ã®ã‚¢ãƒ—ãƒª`);
                } catch (error) {
                    this.log(`âŒ è¨­å®šèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ã‚¢ãƒ—ãƒªã‚¿ãƒ–è¨­å®š
            setupAppTabs() {
                const tabsContainer = document.getElementById('appTabs');
                
                // æ—¢å­˜ã®å‹•çš„ã‚¿ãƒ–ã‚’å‰Šé™¤
                const dynamicTabs = tabsContainer.querySelectorAll('.app-tab[data-dynamic="true"]');
                dynamicTabs.forEach(tab => tab.remove());
                
                // ã‚¢ãƒ—ãƒªã‚¿ãƒ–ã‚’è¿½åŠ 
                this.loadedApps.forEach(app => {
                    const tab = document.createElement('button');
                    tab.className = 'app-tab';
                    tab.setAttribute('data-app', app.name);
                    tab.setAttribute('data-dynamic', 'true');
                    tab.innerHTML = `
                        <span class="icon">${app.icon}</span>
                        <span>${app.displayName}</span>
                    `;
                    tabsContainer.appendChild(tab);
                    
                    // ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
                    tab.addEventListener('click', () => this.switchApp(app.name));
                    
                    // ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„é ˜åŸŸã‚’ä½œæˆ
                    this.createAppContent(app);
                });
            }

            // ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ
            createAppContent(app) {
                const mainContent = document.querySelector('.main-content');
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'app-content';
                contentDiv.id = `${app.name}-content`;
                contentDiv.innerHTML = `
                    <div style="padding: 20px; text-align: center;">
                        <h2>${app.icon} ${app.displayName}</h2>
                        <p>${app.description || 'ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ'}</p>
                        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> ${app.version}</p>
                        <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> ${app.status}</p>
                        
                        <div style="margin-top: 30px;">
                            <button class="btn" onclick="app.testAppAPI('${app.name}')">
                                ğŸ”— ${app.displayName} API ãƒ†ã‚¹ãƒˆ
                            </button>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: left;">
                            <h4>åˆ©ç”¨å¯èƒ½ãªAPI:</h4>
                            <ul style="margin-top: 10px;">
                                <li>GET /api/${app.name}/* - ãƒ‡ãƒ¼ã‚¿å–å¾—</li>
                                <li>POST /api/${app.name}/* - ãƒ‡ãƒ¼ã‚¿è¿½åŠ </li>
                                <li>DELETE /api/${app.name}/* - ãƒ‡ãƒ¼ã‚¿å‰Šé™¤</li>
                                <li>POST /api/${app.name}/export/csv - CSVå‡ºåŠ›</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                mainContent.appendChild(contentDiv);
            }

            // ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆ
            switchApp(appName) {
                // ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
                document.querySelectorAll('.app-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-app="${appName}"]`).classList.add('active');
                
                // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆ
                document.querySelectorAll('.app-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                const targetContent = document.getElementById(`${appName}-content`);
                if (targetContent) {
                    targetContent.style.display = 'block';
                    
                    // ã‚¢ãƒ—ãƒªå›ºæœ‰ã®åˆæœŸåŒ–
                    if (appName === 'money') {
                        // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
                        const today = new Date().toISOString().split('T')[0];
                        const dateInput = document.getElementById('money-date');
                        if (dateInput) {
                            dateInput.value = today;
                        }
                        
                        // å–å¼•å±¥æ­´ã‚’èª­ã¿è¾¼ã¿
                        this.loadMoneyTransactions();
                    } else if (appName === 'time') {
                        // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
                        const today = new Date().toISOString().split('T')[0];
                        const dateInput = document.getElementById('time-date');
                        if (dateInput) {
                            dateInput.value = today;
                        }
                        
                        // æ™‚é–“è¨˜éŒ²ã‚’èª­ã¿è¾¼ã¿
                        this.loadTimeRecords();
                    } else if (appName === 'weight') {
                        // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
                        const today = new Date().toISOString().split('T')[0];
                        const dateInput = document.getElementById('weight-date');
                        if (dateInput) {
                            dateInput.value = today;
                        }
                        
                        // ä½“é‡è¨˜éŒ²ã‚’èª­ã¿è¾¼ã¿
                        this.loadWeightRecords();
                    } else if (appName === 'memo') {
                        // ãƒ¡ãƒ¢ä¸€è¦§ã‚’èª­ã¿è¾¼ã¿
                        this.loadMemos();
                    } else if (appName === 'calc') {
                        // è¨ˆç®—å±¥æ­´ã‚’èª­ã¿è¾¼ã¿
                        this.loadCalcHistory();
                    }
                    
                    // è¨­å®šç”»é¢ã®å ´åˆã¯è¨­å®šUIã‚’åˆæœŸåŒ–
                    if (appName === 'settings') {
                        this.loadConfigUI();
                    }
                }
                
                this.currentApp = appName;
                this.log(`ğŸ”„ ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆ | ${appName}`);
            }

            // èªè¨¼è¨­å®š
            setupAuth() {
                if (!this.auth) return;
                
                this.auth.onAuthStateChanged((user) => {
                    this.currentUser = user;
                    this.updateAuthUI();
                    
                    if (user) {
                        this.log(`ğŸ‘¤ ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ | ${user.email}`);
                    } else {
                        this.log('ğŸ‘¤ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ');
                    }
                });
            }

            // èªè¨¼UIæ›´æ–°
            updateAuthUI() {
                const authBtn = document.getElementById('authBtn');
                
                if (this.currentUser) {
                    authBtn.textContent = 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ';
                    authBtn.onclick = () => this.signOut();
                } else {
                    authBtn.textContent = 'Googleã§ãƒ­ã‚°ã‚¤ãƒ³';
                    authBtn.onclick = () => this.signIn();
                }
            }

            // ãƒ­ã‚°ã‚¤ãƒ³
            async signIn() {
                try {
                    const provider = new firebase.auth.GoogleAuthProvider();
                    await this.auth.signInWithPopup(provider);
                } catch (error) {
                    this.log(`âŒ ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
            async signOut() {
                try {
                    await this.auth.signOut();
                } catch (error) {
                    this.log(`âŒ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // æ¥ç¶šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
            updateConnectionStatus(type, message) {
                const status = document.getElementById('connectionStatus');
                status.className = `status status-${type}`;
                status.innerHTML = `<span>${type === 'success' ? 'âœ…' : type === 'warning' ? 'âš ï¸' : 'âŒ'}</span><span>${message}</span>`;
            }

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
            setupEventListeners() {
                // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.app-tab')) {
                        const tab = e.target.closest('.app-tab');
                        const appName = tab.getAttribute('data-app');
                        this.switchApp(appName);
                    }
                });
            }

            // API ãƒ†ã‚¹ãƒˆ
            async testAPI() {
                try {
                    this.log('ğŸ”— APIæ¥ç¶šãƒ†ã‚¹ãƒˆé–‹å§‹');
                    
                    const response = await fetch('/api/health');
                    const data = await response.json();
                    
                    if (data.status === 'OK') {
                        this.log('âœ… APIæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ');
                        this.updateConnectionStatus('success', 'APIæ­£å¸¸');
                    } else {
                        this.log('âŒ APIæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—');
                        this.updateConnectionStatus('error', 'APIç•°å¸¸');
                    }
                } catch (error) {
                    this.log(`âŒ APIæ¥ç¶šãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    this.updateConnectionStatus('error', 'APIæ¥ç¶šã‚¨ãƒ©ãƒ¼');
                }
            }

            // ã‚¢ãƒ—ãƒªå€‹åˆ¥API ãƒ†ã‚¹ãƒˆ
            async testAppAPI(appName) {
                try {
                    this.log(`ğŸ”— ${appName} API ãƒ†ã‚¹ãƒˆé–‹å§‹`);
                    
                    // ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ãƒ†ã‚¹ãƒˆAPIã‚’å‘¼ã³å‡ºã—
                    const response = await fetch(`/api/${appName}/sample-data`, {
                        method: 'POST'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.log(`âœ… ${appName} API ãƒ†ã‚¹ãƒˆæˆåŠŸ`);
                    } else {
                        this.log(`âŒ ${appName} API ãƒ†ã‚¹ãƒˆå¤±æ•—`);
                    }
                } catch (error) {
                    this.log(`âŒ ${appName} API ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
            async generateSampleData() {
                try {
                    this.log('ğŸ¯ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆé–‹å§‹');
                    
                    for (const app of this.loadedApps) {
                        await this.testAppAPI(app.name);
                    }
                    
                    this.log('âœ… å…¨ã‚¢ãƒ—ãƒªã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆå®Œäº†');
                } catch (error) {
                    this.log(`âŒ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // è¨­å®šé–¢é€£æ©Ÿèƒ½
            async loadConfig() {
                try {
                    const response = await fetch('/api/config');
                    const data = await response.json();
                    
                    document.getElementById('configEditor').value = 
                        JSON.stringify(data.config, null, 2);
                    
                    this.log('ğŸ“¥ è¨­å®šèª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    this.log(`âŒ è¨­å®šèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async saveConfig() {
                try {
                    const configText = document.getElementById('configEditor').value;
                    const config = JSON.parse(configText);
                    
                    const response = await fetch('/api/config', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(config)
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.log('ğŸ’¾ è¨­å®šä¿å­˜å®Œäº†');
                        alert('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚å¤‰æ›´ã‚’åæ˜ ã™ã‚‹ã«ã¯ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚');
                    } else {
                        throw new Error(data.error || 'è¨­å®šä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¨­å®šä¿å­˜ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    alert(`è¨­å®šä¿å­˜ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                }
            }

            async resetConfig() {
                if (confirm('è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                    await this.loadConfig();
                    this.log('ğŸ”„ è¨­å®šãƒªã‚»ãƒƒãƒˆå®Œäº†');
                }
            }

            // ãŠé‡‘ç®¡ç†æ©Ÿèƒ½
            async addMoneyTransaction() {
                const type = document.getElementById('money-type').value;
                const amount = parseFloat(document.getElementById('money-amount').value);
                const category = document.getElementById('money-category').value;
                const description = document.getElementById('money-description').value;
                const date = document.getElementById('money-date').value || new Date().toISOString().split('T')[0];

                if (!amount || amount <= 0) {
                    alert('æ­£ã—ã„é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const transaction = {
                    id: Date.now().toString(),
                    type,
                    amount,
                    category,
                    description,
                    date,
                    timestamp: new Date().toISOString(),
                    userId: this.currentUser ? this.currentUser.uid : 'anonymous'
                };

                try {
                    // Firebase Realtime Databaseã«ä¿å­˜
                    if (this.database && this.currentUser) {
                        await this.database.ref(`transactions/${this.currentUser.uid}/${transaction.id}`).set(transaction);
                        this.log(`ğŸ’° å–å¼•ã‚’Firebaseã«ä¿å­˜ | ${type} ${amount}å††`);
                    }

                    // ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚‚ä¿å­˜
                    this.saveTransactionLocal(transaction);
                    
                    // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                    document.getElementById('money-amount').value = '';
                    document.getElementById('money-description').value = '';
                    
                    // å–å¼•ä¸€è¦§ã‚’æ›´æ–°
                    this.loadMoneyTransactions();
                    
                    this.log(`ğŸ’° å–å¼•è¨˜éŒ²å®Œäº† | ${type} ${amount}å†† (${category})`);
                } catch (error) {
                    this.log(`âŒ å–å¼•ä¿å­˜ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            saveTransactionLocal(transaction) {
                let transactions = JSON.parse(localStorage.getItem('moneyTransactions') || '[]');
                transactions.push(transaction);
                localStorage.setItem('moneyTransactions', JSON.stringify(transactions));
            }

            async loadMoneyTransactions() {
                try {
                    let transactions = [];
                    
                    // Firebase ã‹ã‚‰å–å¾—
                    if (this.database && this.currentUser) {
                        const snapshot = await this.database.ref(`transactions/${this.currentUser.uid}`).once('value');
                        if (snapshot.exists()) {
                            transactions = Object.values(snapshot.val());
                        }
                    }
                    
                    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚‚å–å¾—ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
                    const localTransactions = JSON.parse(localStorage.getItem('moneyTransactions') || '[]');
                    
                    // ãƒãƒ¼ã‚¸ï¼ˆé‡è¤‡é™¤å»ï¼‰
                    const allTransactions = [...transactions, ...localTransactions];
                    const uniqueTransactions = allTransactions.filter((trans, index, self) =>
                        index === self.findIndex(t => t.id === trans.id)
                    );
                    
                    // æ—¥ä»˜é †ã§ã‚½ãƒ¼ãƒˆ
                    uniqueTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    this.displayTransactions(uniqueTransactions);
                } catch (error) {
                    this.log(`âŒ å–å¼•èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            displayTransactions(transactions) {
                const container = document.getElementById('money-transactions');
                
                if (transactions.length === 0) {
                    container.innerHTML = '<p>å–å¼•å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                    return;
                }
                
                let html = '';
                let totalIncome = 0;
                let totalExpense = 0;
                
                transactions.forEach(trans => {
                    const isIncome = trans.type === 'income';
                    const amount = parseFloat(trans.amount);
                    
                    if (isIncome) {
                        totalIncome += amount;
                    } else {
                        totalExpense += amount;
                    }
                    
                    html += `
                        <div class="transaction-item ${isIncome ? 'transaction-income' : 'transaction-expense'}">
                            <div>
                                <strong>${trans.date}</strong> | ${trans.category}
                                ${trans.description ? ` - ${trans.description}` : ''}
                            </div>
                            <div>
                                <span style="color: ${isIncome ? 'green' : 'red'}">
                                    ${isIncome ? '+' : '-'}${amount.toLocaleString()}å††
                                </span>
                            </div>
                        </div>
                    `;
                });
                
                const balance = totalIncome - totalExpense;
                html = `
                    <div style="background: #e9ecef; padding: 10px; margin-bottom: 10px; border-radius: 4px;">
                        <strong>æ®‹é«˜: ${balance.toLocaleString()}å††</strong> 
                        (åå…¥: ${totalIncome.toLocaleString()}å††, æ”¯å‡º: ${totalExpense.toLocaleString()}å††)
                    </div>
                ` + html;
                
                container.innerHTML = html;
            }

            async exportMoneyCSV() {
                try {
                    const response = await fetch('/api/money/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            startDate: null,
                            endDate: null,
                            type: null
                        })
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `money_transactions_${new Date().toISOString().split('T')[0]}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ CSVå‡ºåŠ›å®Œäº†');
                    }
                } catch (error) {
                    this.log(`âŒ CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ãƒ­ã‚°ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
            async copyLogsToClipboard() {
                try {
                    const logContainer = document.getElementById('debugLogs');
                    const logText = logContainer.textContent || logContainer.innerText;
                    
                    // ãƒ­ã‚°ãŒç©ºã®å ´åˆ
                    if (!logText || logText === 'ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...') {
                        this.log('âŒ ã‚³ãƒ”ãƒ¼å¯èƒ½ãªãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“');
                        alert('ã‚³ãƒ”ãƒ¼å¯èƒ½ãªãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“');
                        return;
                    }
                    
                    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰APIå¯¾å¿œãƒã‚§ãƒƒã‚¯
                    if (navigator.clipboard && window.isSecureContext) {
                        await navigator.clipboard.writeText(logText);
                        this.log('ğŸ“‹ ãƒ­ã‚°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼å®Œäº†');
                        
                        // æˆåŠŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                        const button = document.querySelector('[onclick="copyLogsToClipboard()"]');
                        const originalText = button.textContent;
                        button.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†';
                        button.style.background = '#4CAF50';
                        
                        setTimeout(() => {
                            button.textContent = originalText;
                            button.style.background = '';
                        }, 2000);
                        
                    } else {
                        // å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                        const textArea = document.createElement('textarea');
                        textArea.value = logText;
                        textArea.style.position = 'fixed';
                        textArea.style.opacity = '0';
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        this.log('ğŸ“‹ ãƒ­ã‚°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼å®Œäº†ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰');
                        alert('ãƒ­ã‚°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                    }
                    
                } catch (error) {
                    this.log(`âŒ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // æ™‚é–“ç®¡ç†æ©Ÿèƒ½
            timer = {
                interval: null,
                seconds: 0,
                isRunning: false,
                taskName: ''
            };

            async addTimeRecord() {
                this.log('â° æ™‚é–“è¨˜éŒ²ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const task = document.getElementById('time-task').value;
                const category = document.getElementById('time-category').value;
                const hours = parseInt(document.getElementById('time-hours').value) || 0;
                const minutes = parseInt(document.getElementById('time-minutes').value) || 0;
                const date = document.getElementById('time-date').value || new Date().toISOString().split('T')[0];

                if (!task) {
                    this.log('âŒ ã‚¿ã‚¹ã‚¯åãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                    alert('ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                if (hours === 0 && minutes === 0) {
                    this.log('âŒ æ™‚é–“ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                    alert('æ™‚é–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const timeRecord = {
                    id: Date.now().toString(),
                    task,
                    category,
                    hours,
                    minutes,
                    totalMinutes: hours * 60 + minutes,
                    date,
                    timestamp: new Date().toISOString(),
                    userId: this.currentUser ? this.currentUser.uid : 'anonymous'
                };

                try {
                    const response = await fetch('/api/time/add', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(timeRecord)
                    });

                    if (response.ok) {
                        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                        document.getElementById('time-task').value = '';
                        document.getElementById('time-hours').value = '';
                        document.getElementById('time-minutes').value = '';
                        
                        this.loadTimeRecords();
                        this.log(`â° æ™‚é–“è¨˜éŒ²å®Œäº† | ${task} ${hours}æ™‚é–“${minutes}åˆ† (${category})`);
                    } else {
                        this.log('âŒ æ™‚é–“è¨˜éŒ²ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ æ™‚é–“è¨˜éŒ²ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async loadTimeRecords() {
                this.log('â° æ™‚é–“è¨˜éŒ²ã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/time/data');
                    const result = await response.json();
                    
                    const container = document.getElementById('time-records');
                    
                    if (result.data && result.data.length === 0) {
                        container.innerHTML = '<p>æ™‚é–“è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                        return;
                    }
                    
                    let html = '';
                    let totalMinutes = 0;
                    
                    if (result.data) {
                        result.data.forEach(record => {
                            totalMinutes += record.totalMinutes || 0;
                            
                            html += `
                                <div class="record-item record-${record.category.toLowerCase()}">
                                    <div>
                                        <strong>${record.date}</strong> | ${record.task}
                                        <br><small>${record.category}</small>
                                    </div>
                                    <div>
                                        <span>${record.hours || 0}æ™‚é–“${record.minutes || 0}åˆ†</span>
                                    </div>
                                </div>
                            `;
                        });
                    }
                    
                    const totalHours = Math.floor(totalMinutes / 60);
                    const remainingMinutes = totalMinutes % 60;
                    
                    html = `
                        <div style="background: #e9ecef; padding: 10px; margin-bottom: 10px; border-radius: 4px;">
                            <strong>åˆè¨ˆæ™‚é–“: ${totalHours}æ™‚é–“${remainingMinutes}åˆ†</strong>
                        </div>
                    ` + html;
                    
                    container.innerHTML = html || '<p>æ™‚é–“è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                    this.log('â° æ™‚é–“è¨˜éŒ²ã®èª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    this.log(`âŒ æ™‚é–“è¨˜éŒ²èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    document.getElementById('time-records').innerHTML = '<p>æ™‚é–“è¨˜éŒ²ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</p>';
                }
            }

            startTimer() {
                this.log('â±ï¸ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const task = document.getElementById('time-task').value;
                if (!task) {
                    this.log('âŒ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹: ã‚¿ã‚¹ã‚¯åãŒå¿…è¦ã§ã™');
                    alert('ã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›ã—ã¦ã‹ã‚‰ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹ã—ã¦ãã ã•ã„');
                    return;
                }

                this.timer.taskName = task;
                this.timer.seconds = 0;
                this.timer.isRunning = true;
                
                document.getElementById('timer-section').style.display = 'block';
                document.getElementById('timer-task-name').textContent = `å®Ÿè¡Œä¸­: ${task}`;
                
                this.timer.interval = setInterval(() => {
                    this.timer.seconds++;
                    this.updateTimerDisplay();
                }, 1000);
                
                this.log(`â±ï¸ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹ | ã‚¿ã‚¹ã‚¯: ${task}`);
            }

            pauseTimer() {
                this.log('â¸ï¸ ã‚¿ã‚¤ãƒãƒ¼ä¸€æ™‚åœæ­¢');
                
                if (this.timer.interval) {
                    clearInterval(this.timer.interval);
                    this.timer.interval = null;
                    this.timer.isRunning = false;
                }
            }

            stopTimer() {
                this.log('â¹ï¸ ã‚¿ã‚¤ãƒãƒ¼åœæ­¢');
                
                if (this.timer.interval) {
                    clearInterval(this.timer.interval);
                    this.timer.interval = null;
                }
                
                const hours = Math.floor(this.timer.seconds / 3600);
                const minutes = Math.floor((this.timer.seconds % 3600) / 60);
                
                // è‡ªå‹•ã§æ™‚é–“ã‚’å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã«è¨­å®š
                document.getElementById('time-hours').value = hours;
                document.getElementById('time-minutes').value = minutes;
                
                document.getElementById('timer-section').style.display = 'none';
                this.timer.seconds = 0;
                this.timer.isRunning = false;
                
                this.log(`â¹ï¸ ã‚¿ã‚¤ãƒãƒ¼åœæ­¢ | çµŒéæ™‚é–“: ${hours}æ™‚é–“${minutes}åˆ†`);
            }

            updateTimerDisplay() {
                const hours = Math.floor(this.timer.seconds / 3600);
                const minutes = Math.floor((this.timer.seconds % 3600) / 60);
                const seconds = this.timer.seconds % 60;
                
                const display = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('timer-display').textContent = display;
            }

            async exportTimeCSV() {
                this.log('ğŸ“¥ æ™‚é–“ç®¡ç†CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                try {
                    const response = await fetch('/api/time/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({})
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `time_records_${new Date().toISOString().split('T')[0]}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ æ™‚é–“ç®¡ç†CSVå‡ºåŠ›å®Œäº†');
                    } else {
                        this.log('âŒ æ™‚é–“ç®¡ç†CSVå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ æ™‚é–“ç®¡ç†CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ä½“é‡ç®¡ç†æ©Ÿèƒ½
            async addWeightRecord() {
                this.log('âš–ï¸ ä½“é‡è¨˜éŒ²ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const weight = parseFloat(document.getElementById('weight-value').value);
                const height = parseFloat(document.getElementById('weight-height').value);
                const date = document.getElementById('weight-date').value || new Date().toISOString().split('T')[0];
                const memo = document.getElementById('weight-memo').value;

                if (!weight) {
                    this.log('âŒ ä½“é‡ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                    alert('ä½“é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const weightRecord = {
                    id: Date.now().toString(),
                    weight,
                    height,
                    date,
                    memo,
                    timestamp: new Date().toISOString(),
                    userId: this.currentUser ? this.currentUser.uid : 'anonymous'
                };

                // BMIè¨ˆç®—
                if (height) {
                    weightRecord.bmi = (weight / Math.pow(height / 100, 2)).toFixed(1);
                }

                try {
                    const response = await fetch('/api/weight/add', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(weightRecord)
                    });

                    if (response.ok) {
                        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                        document.getElementById('weight-value').value = '';
                        document.getElementById('weight-memo').value = '';
                        
                        this.loadWeightRecords();
                        this.log(`âš–ï¸ ä½“é‡è¨˜éŒ²å®Œäº† | ${weight}kg ${height ? `BMI:${weightRecord.bmi}` : ''}`);
                    } else {
                        this.log('âŒ ä½“é‡è¨˜éŒ²ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ä½“é‡è¨˜éŒ²ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async loadWeightRecords() {
                this.log('âš–ï¸ ä½“é‡è¨˜éŒ²ã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/weight/data');
                    const result = await response.json();
                    
                    const container = document.getElementById('weight-records');
                    
                    if (result.data && result.data.length === 0) {
                        container.innerHTML = '<p>ä½“é‡è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                        return;
                    }
                    
                    let html = '';
                    
                    if (result.data) {
                        result.data.forEach(record => {
                            html += `
                                <div class="record-item">
                                    <div>
                                        <strong>${record.date}</strong> | ${record.weight}kg
                                        ${record.bmi ? ` | BMI: ${record.bmi}` : ''}
                                        ${record.memo ? `<br><small>${record.memo}</small>` : ''}
                                    </div>
                                </div>
                            `;
                        });
                    }
                    
                    container.innerHTML = html || '<p>ä½“é‡è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                    this.log('âš–ï¸ ä½“é‡è¨˜éŒ²ã®èª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    this.log(`âŒ ä½“é‡è¨˜éŒ²èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    document.getElementById('weight-records').innerHTML = '<p>ä½“é‡è¨˜éŒ²ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</p>';
                }
            }

            calculateBMI() {
                this.log('ğŸ“Š BMIè¨ˆç®—ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const weight = parseFloat(document.getElementById('weight-value').value);
                const height = parseFloat(document.getElementById('weight-height').value);

                if (!weight || !height) {
                    this.log('âŒ BMIè¨ˆç®—: ä½“é‡ã¨èº«é•·ãŒå¿…è¦ã§ã™');
                    alert('ä½“é‡ã¨èº«é•·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const bmi = (weight / Math.pow(height / 100, 2)).toFixed(1);
                let status = '';
                let statusClass = '';

                if (bmi < 18.5) {
                    status = 'ä½ä½“é‡';
                    statusClass = 'bmi-underweight';
                } else if (bmi < 25) {
                    status = 'æ™®é€šä½“é‡';
                    statusClass = 'bmi-normal';
                } else if (bmi < 30) {
                    status = 'è‚¥æº€ï¼ˆ1åº¦ï¼‰';
                    statusClass = 'bmi-overweight';
                } else {
                    status = 'è‚¥æº€ï¼ˆ2åº¦ä»¥ä¸Šï¼‰';
                    statusClass = 'bmi-obese';
                }

                document.getElementById('bmi-result').textContent = `BMI: ${bmi}`;
                document.getElementById('bmi-status').textContent = status;
                document.getElementById('bmi-status').className = `bmi-status ${statusClass}`;
                document.getElementById('bmi-section').style.display = 'block';

                this.log(`ğŸ“Š BMIè¨ˆç®—å®Œäº† | BMI: ${bmi} (${status})`);
            }

            async exportWeightCSV() {
                this.log('ğŸ“¥ ä½“é‡ç®¡ç†CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                try {
                    const response = await fetch('/api/weight/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({})
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `weight_records_${new Date().toISOString().split('T')[0]}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ ä½“é‡ç®¡ç†CSVå‡ºåŠ›å®Œäº†');
                    } else {
                        this.log('âŒ ä½“é‡ç®¡ç†CSVå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ä½“é‡ç®¡ç†CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ãƒ¡ãƒ¢ç®¡ç†æ©Ÿèƒ½
            async addMemo() {
                this.log('ğŸ“ ãƒ¡ãƒ¢ä¿å­˜ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const title = document.getElementById('memo-title').value;
                const content = document.getElementById('memo-textarea').value;
                const category = document.getElementById('memo-category').value;
                const tagsInput = document.getElementById('memo-tags').value;

                if (!title || !content) {
                    this.log('âŒ ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ãŒå¿…è¦ã§ã™');
                    alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag) : [];

                const memo = {
                    title,
                    content,
                    category,
                    tags,
                    userId: this.currentUser ? this.currentUser.uid : 'anonymous'
                };

                try {
                    const response = await fetch('/api/memo/add', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(memo)
                    });

                    if (response.ok) {
                        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                        document.getElementById('memo-title').value = '';
                        document.getElementById('memo-textarea').value = '';
                        document.getElementById('memo-tags').value = '';
                        
                        this.loadMemos();
                        this.log(`ğŸ“ ãƒ¡ãƒ¢ä¿å­˜å®Œäº† | ${title} (${category})`);
                    } else {
                        this.log('âŒ ãƒ¡ãƒ¢ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ãƒ¡ãƒ¢ä¿å­˜ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async loadMemos() {
                this.log('ğŸ“ ãƒ¡ãƒ¢ä¸€è¦§ã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/memo/data');
                    const result = await response.json();
                    
                    const container = document.getElementById('memo-records');
                    
                    if (result.data && result.data.length === 0) {
                        container.innerHTML = '<p>ãƒ¡ãƒ¢ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                        return;
                    }
                    
                    let html = '';
                    
                    if (result.data) {
                        result.data.forEach(memo => {
                            const tagsHtml = Array.isArray(memo.tags) ? 
                                memo.tags.map(tag => `<span class="memo-tag">${tag}</span>`).join('') : '';
                            
                            html += `
                                <div class="memo-item">
                                    <div class="memo-header">
                                        <span class="memo-title">${memo.title}</span>
                                        <span class="memo-category">${memo.category}</span>
                                    </div>
                                    <div class="memo-content">${memo.content}</div>
                                    <div class="memo-meta">
                                        <div>
                                            <span>${memo.date}</span>
                                            <div class="memo-tags">${tagsHtml}</div>
                                        </div>
                                        <button class="memo-delete-btn" onclick="deleteMemo('${memo.id}')">ğŸ—‘ï¸ å‰Šé™¤</button>
                                    </div>
                                </div>
                            `;
                        });
                    }
                    
                    container.innerHTML = html || '<p>ãƒ¡ãƒ¢ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                    this.log('ğŸ“ ãƒ¡ãƒ¢ä¸€è¦§ã®èª­ã¿è¾¼ã¿å®Œäº†');
                } catch (error) {
                    this.log(`âŒ ãƒ¡ãƒ¢èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    document.getElementById('memo-records').innerHTML = '<p>ãƒ¡ãƒ¢ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</p>';
                }
            }

            async deleteMemo(memoId) {
                this.log(`ğŸ—‘ï¸ ãƒ¡ãƒ¢å‰Šé™¤ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ | ID: ${memoId}`);
                
                if (!confirm('ã“ã®ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                    this.log('ğŸ“ ãƒ¡ãƒ¢å‰Šé™¤ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ');
                    return;
                }

                try {
                    const response = await fetch(`/api/memo/delete/${memoId}`, {
                        method: 'DELETE'
                    });

                    if (response.ok) {
                        this.loadMemos();
                        this.log(`ğŸ—‘ï¸ ãƒ¡ãƒ¢å‰Šé™¤å®Œäº† | ID: ${memoId}`);
                    } else {
                        this.log('âŒ ãƒ¡ãƒ¢ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ãƒ¡ãƒ¢å‰Šé™¤ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async exportMemoCSV() {
                this.log('ğŸ“¥ ãƒ¡ãƒ¢CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                try {
                    const response = await fetch('/api/memo/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({})
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `memo_data_${new Date().toISOString().split('T')[0]}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ ãƒ¡ãƒ¢CSVå‡ºåŠ›å®Œäº†');
                    } else {
                        this.log('âŒ ãƒ¡ãƒ¢CSVå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ãƒ¡ãƒ¢CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ================================================================
            // è¨ˆç®—æ©Ÿç®¡ç†æ©Ÿèƒ½
            // ================================================================
            async calculateNumbers() {
                this.log('ğŸ§® è¨ˆç®—å®Ÿè¡Œãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const numberA = parseFloat(document.getElementById('calc-number-a').value);
                const numberB = parseFloat(document.getElementById('calc-number-b').value);
                const resultElement = document.getElementById('calc-result');

                // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
                if (isNaN(numberA) || isNaN(numberB)) {
                    this.log('âŒ æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    alert('æ•°å€¤A ã¨ æ•°å€¤B ã«æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    resultElement.textContent = '?';
                    return;
                }

                try {
                    const response = await fetch('/api/calc/calculate', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            numberA: numberA,
                            numberB: numberB,
                            operation: 'add'
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        resultElement.textContent = result.calculation.result;
                        
                        this.loadCalcHistory();
                        this.log(`ğŸ§® è¨ˆç®—å®Œäº† | ${numberA} + ${numberB} = ${result.calculation.result}`);
                    } else {
                        this.log('âŒ è¨ˆç®—å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        resultElement.textContent = 'ã‚¨ãƒ©ãƒ¼';
                    }
                } catch (error) {
                    this.log(`âŒ è¨ˆç®—ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    resultElement.textContent = 'ã‚¨ãƒ©ãƒ¼';
                }
            }

            clearCalculation() {
                document.getElementById('calc-number-a').value = '';
                document.getElementById('calc-number-b').value = '';
                document.getElementById('calc-result').textContent = '?';
                this.log('ğŸ—‘ï¸ è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            }

            async loadCalcHistory() {
                this.log('ğŸ“Š è¨ˆç®—å±¥æ­´ã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/calc/history');
                    const result = await response.json();
                    
                    const container = document.getElementById('calc-history-list');
                    
                    if (!result.calculations || result.calculations.length === 0) {
                        container.innerHTML = '<div class="loading">è¨ˆç®—å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                        return;
                    }
                    
                    let html = '';
                    
                    result.calculations.forEach(calc => {
                        const date = new Date(calc.timestamp).toLocaleString('ja-JP');
                        html += `
                            <div class="calc-history-item">
                                <div>
                                    <div class="calc-expression">${calc.numberA} + ${calc.numberB} = ${calc.result}</div>
                                    <div class="calc-timestamp">${date}</div>
                                </div>
                                <button class="calc-delete-btn" onclick="deleteCalcHistory('${calc.id}')">ğŸ—‘ï¸</button>
                            </div>
                        `;
                    });
                    
                    container.innerHTML = html;
                    this.log('ğŸ“Š è¨ˆç®—å±¥æ­´ã®èª­ã¿è¾¼ã¿å®Œäº†');
                    
                } catch (error) {
                    this.log(`âŒ è¨ˆç®—å±¥æ­´èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async deleteCalcHistory(calcId) {
                this.log(`ğŸ—‘ï¸ è¨ˆç®—å±¥æ­´å‰Šé™¤ | ID: ${calcId}`);
                
                try {
                    const response = await fetch(`/api/calc/history/${calcId}`, {
                        method: 'DELETE'
                    });

                    if (response.ok) {
                        this.loadCalcHistory();
                        this.log(`ğŸ—‘ï¸ è¨ˆç®—å±¥æ­´å‰Šé™¤å®Œäº† | ID: ${calcId}`);
                    } else {
                        this.log('âŒ è¨ˆç®—å±¥æ­´ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¨ˆç®—å±¥æ­´å‰Šé™¤ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async exportCalcCSV() {
                this.log('ğŸ“¥ è¨ˆç®—å±¥æ­´CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                try {
                    const response = await fetch('/api/calc/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({})
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `calc_history_${new Date().toISOString().slice(0, 10)}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        a.remove();
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ è¨ˆç®—å±¥æ­´CSVå‡ºåŠ›å®Œäº†');
                    } else {
                        this.log('âŒ è¨ˆç®—å±¥æ­´CSVå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¨ˆç®—å±¥æ­´CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ================================================================
            // æœã®ç®¡ç†æ©Ÿèƒ½
            // ================================================================
            async addClothes() {
                this.log('ğŸ‘• è¡£é¡è¨˜éŒ²ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                const type = document.getElementById('clothes-type').value;
                const color = document.getElementById('clothes-color').value;
                const season = document.getElementById('clothes-season').value;
                const size = document.getElementById('clothes-size').value;
                const quantity = parseInt(document.getElementById('clothes-quantity').value);
                const brand = document.getElementById('clothes-brand').value;
                const notes = document.getElementById('clothes-notes').value;

                if (!type || !color || !season || !size || !quantity) {
                    this.log('âŒ å¿…é ˆé …ç›®ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                    alert('ç¨®åˆ¥ã€è‰²ã€å­£ç¯€ã€ã‚µã‚¤ã‚ºã€æ•°é‡ã¯å¿…é ˆã§ã™');
                    return;
                }

                try {
                    const response = await fetch('/api/clothes/add', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            type, color, season, size, quantity, brand, notes
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        
                        // ãƒ•ã‚©ãƒ¼ãƒ ã‚¯ãƒªã‚¢
                        document.getElementById('clothes-type').value = '';
                        document.getElementById('clothes-color').value = '';
                        document.getElementById('clothes-season').value = '';
                        document.getElementById('clothes-size').value = '';
                        document.getElementById('clothes-quantity').value = '';
                        document.getElementById('clothes-brand').value = '';
                        document.getElementById('clothes-notes').value = '';
                        
                        this.loadClothesData();
                        this.log(`ğŸ‘• è¡£é¡è¨˜éŒ²å®Œäº† | ${type}(${color}ãƒ»${season}ãƒ»${size}) ${quantity}æš`);
                    } else {
                        this.log('âŒ è¡£é¡è¨˜éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¡£é¡è¨˜éŒ²ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async loadClothesData() {
                this.log('ğŸ“Š è¡£é¡ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/clothes/data');
                    const result = await response.json();
                    
                    const container = document.getElementById('clothes-records');
                    
                    if (!result.data || result.data.length === 0) {
                        container.innerHTML = '<div class="loading">è¡£é¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                        return;
                    }
                    
                    let html = '';
                    
                    result.data.forEach(clothes => {
                        const date = new Date(clothes.timestamp).toLocaleString('ja-JP');
                        html += `
                            <div class="record-item">
                                <div class="record-main">
                                    <div class="record-title">ğŸ‘• ${clothes.type} (${clothes.color})</div>
                                    <div class="record-info">
                                        ${clothes.season} | ${clothes.size} | ${clothes.quantity}æš
                                        ${clothes.brand ? ` | ${clothes.brand}` : ''}
                                    </div>
                                    ${clothes.notes ? `<div class="record-notes">${clothes.notes}</div>` : ''}
                                    <div class="record-date">${date}</div>
                                </div>
                                <button class="delete-btn" onclick="deleteClothes('${clothes.id}')">ğŸ—‘ï¸</button>
                            </div>
                        `;
                    });
                    
                    container.innerHTML = html;
                    this.log('ğŸ“Š è¡£é¡ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿å®Œäº†');
                    
                } catch (error) {
                    this.log(`âŒ è¡£é¡ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async deleteClothes(clothesId) {
                this.log(`ğŸ—‘ï¸ è¡£é¡å‰Šé™¤ | ID: ${clothesId}`);
                
                try {
                    const response = await fetch(`/api/clothes/data/${clothesId}`, {
                        method: 'DELETE'
                    });

                    if (response.ok) {
                        this.loadClothesData();
                        this.log(`ğŸ—‘ï¸ è¡£é¡å‰Šé™¤å®Œäº† | ID: ${clothesId}`);
                    } else {
                        this.log('âŒ è¡£é¡å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¡£é¡å‰Šé™¤ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async exportClothesCSV() {
                this.log('ğŸ“¥ è¡£é¡CSVå‡ºåŠ›ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');
                
                try {
                    const response = await fetch('/api/clothes/export/csv', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({})
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `clothes_data_${new Date().toISOString().slice(0, 10)}.csv`;
                        document.body.appendChild(a);
                        a.click();
                        a.remove();
                        window.URL.revokeObjectURL(url);
                        
                        this.log('ğŸ“¥ è¡£é¡CSVå‡ºåŠ›å®Œäº†');
                    } else {
                        this.log('âŒ è¡£é¡CSVå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¡£é¡CSVå‡ºåŠ›ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            async loadClothesStats() {
                this.log('ğŸ“Š è¡£é¡çµ±è¨ˆã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/clothes/stats');
                    const result = await response.json();
                    
                    if (result.success) {
                        const stats = result.stats;
                        
                        // ç¨®åˆ¥åˆ¥çµ±è¨ˆ
                        let typeHtml = '';
                        Object.entries(stats.byType).forEach(([type, count]) => {
                            typeHtml += `<div>${type}: ${count}æš</div>`;
                        });
                        document.getElementById('stats-by-type').innerHTML = typeHtml;
                        
                        // è‰²åˆ¥çµ±è¨ˆ
                        let colorHtml = '';
                        Object.entries(stats.byColor).forEach(([color, count]) => {
                            colorHtml += `<div>${color}: ${count}æš</div>`;
                        });
                        document.getElementById('stats-by-color').innerHTML = colorHtml;
                        
                        // å­£ç¯€åˆ¥çµ±è¨ˆ
                        let seasonHtml = '';
                        Object.entries(stats.bySeason).forEach(([season, count]) => {
                            seasonHtml += `<div>${season}: ${count}æš</div>`;
                        });
                        document.getElementById('stats-by-season').innerHTML = seasonHtml;
                        
                        // ã‚µã‚¤ã‚ºåˆ¥çµ±è¨ˆ
                        let sizeHtml = '';
                        Object.entries(stats.bySize).forEach(([size, count]) => {
                            sizeHtml += `<div>${size}: ${count}æš</div>`;
                        });
                        document.getElementById('stats-by-size').innerHTML = sizeHtml;
                        
                        // çµ±è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º
                        document.getElementById('clothes-stats-section').style.display = 'block';
                        
                        this.log('ğŸ“Š è¡£é¡çµ±è¨ˆè¡¨ç¤ºå®Œäº†');
                    } else {
                        this.log('âŒ è¡£é¡çµ±è¨ˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ è¡£é¡çµ±è¨ˆã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            // ================================================================
            // è¨­å®šç®¡ç†UIæ©Ÿèƒ½
            // ================================================================
            async loadConfigUI() {
                this.log('âš™ï¸ è¨­å®šUIã‚’èª­ã¿è¾¼ã¿ä¸­...');
                
                try {
                    const response = await fetch('/api/config');
                    const result = await response.json();
                    
                    // ã‚¢ãƒ—ãƒªæœ‰åŠ¹åŒ–ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
                    this.renderAppCheckboxes(result.config);
                    
                    // æ©Ÿèƒ½è¨­å®šãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
                    this.renderFeatureCheckboxes(result.config);
                    
                    this.log('âš™ï¸ è¨­å®šUIèª­ã¿è¾¼ã¿å®Œäº†');
                    
                } catch (error) {
                    this.log(`âŒ è¨­å®šUIèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            renderAppCheckboxes(config) {
                const container = document.getElementById('enabledAppsCheckboxes');
                const allApps = {
                    'money': { name: 'ãŠé‡‘ç®¡ç†', icon: 'ğŸ’°' },
                    'time': { name: 'æ™‚é–“ç®¡ç†', icon: 'â°' },
                    'weight': { name: 'ä½“é‡ç®¡ç†', icon: 'âš–ï¸' },
                    'memo': { name: 'ãƒ¡ãƒ¢ç®¡ç†', icon: 'ğŸ“' },
                    'calc': { name: 'è¨ˆç®—æ©Ÿ', icon: 'ğŸ§®' }
                };

                let html = '';
                Object.keys(allApps).forEach(appKey => {
                    const app = allApps[appKey];
                    const isEnabled = config.enabledApps && config.enabledApps.includes(appKey);
                    const checkedAttribute = isEnabled ? 'checked' : '';
                    const enabledClass = isEnabled ? 'enabled' : '';
                    
                    html += `
                        <div class="checkbox-item ${enabledClass}">
                            <input type="checkbox" id="app-${appKey}" ${checkedAttribute} onchange="toggleApp('${appKey}')">
                            <label for="app-${appKey}">
                                <span class="app-icon">${app.icon}</span>
                                ${app.name}
                            </label>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }

            renderFeatureCheckboxes(config) {
                const container = document.getElementById('featuresCheckboxes');
                const features = {
                    'firebaseAuth': { name: 'Firebaseèªè¨¼', icon: 'ğŸ”' },
                    'realtimeDatabase': { name: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ DB', icon: 'ğŸ”„' },
                    'csvExport': { name: 'CSVå‡ºåŠ›æ©Ÿèƒ½', icon: 'ğŸ“Š' },
                    'jsonLogs': { name: 'JSONãƒ­ã‚°', icon: 'ğŸ“' },
                    'debugMode': { name: 'ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰', icon: 'ğŸ›' }
                };

                let html = '';
                Object.keys(features).forEach(featureKey => {
                    const feature = features[featureKey];
                    const isEnabled = config.features && config.features[featureKey];
                    const checkedAttribute = isEnabled ? 'checked' : '';
                    const enabledClass = isEnabled ? 'enabled' : '';
                    
                    html += `
                        <div class="checkbox-item ${enabledClass}">
                            <input type="checkbox" id="feature-${featureKey}" ${checkedAttribute} onchange="toggleFeature('${featureKey}')">
                            <label for="feature-${featureKey}">
                                <span class="app-icon">${feature.icon}</span>
                                ${feature.name}
                            </label>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }

            async saveConfigUI() {
                this.log('ğŸ’¾ è¨­å®šä¿å­˜é–‹å§‹...');
                
                try {
                    // ç¾åœ¨ã®è¨­å®šã‚’å–å¾—
                    const response = await fetch('/api/config');
                    const currentConfig = await response.json();
                    
                    // ã‚¢ãƒ—ãƒªè¨­å®šã‚’æ›´æ–°
                    const enabledApps = [];
                    const appCheckboxes = document.querySelectorAll('#enabledAppsCheckboxes input[type="checkbox"]');
                    appCheckboxes.forEach(checkbox => {
                        if (checkbox.checked) {
                            const appName = checkbox.id.replace('app-', '');
                            enabledApps.push(appName);
                        }
                    });
                    
                    // æ©Ÿèƒ½è¨­å®šã‚’æ›´æ–°
                    const features = { ...currentConfig.config.features };
                    const featureCheckboxes = document.querySelectorAll('#featuresCheckboxes input[type="checkbox"]');
                    featureCheckboxes.forEach(checkbox => {
                        const featureName = checkbox.id.replace('feature-', '');
                        features[featureName] = checkbox.checked;
                    });
                    
                    // è¨­å®šã‚’ä¿å­˜
                    const updatedConfig = {
                        ...currentConfig.config,
                        enabledApps: enabledApps,
                        features: features
                    };
                    
                    const saveResponse = await fetch('/api/config', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(updatedConfig)
                    });
                    
                    if (saveResponse.ok) {
                        this.log('ğŸ’¾ è¨­å®šä¿å­˜å®Œäº†');
                        alert('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\\nå¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ã«ã¯ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚');
                    } else {
                        this.log('âŒ è¨­å®šä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        alert('è¨­å®šã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                    }
                    
                } catch (error) {
                    this.log(`âŒ è¨­å®šä¿å­˜ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                    alert('è¨­å®šã®ä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');
                }
            }

            toggleApp(appName) {
                const checkbox = document.getElementById(`app-${appName}`);
                const container = checkbox.closest('.checkbox-item');
                
                if (checkbox.checked) {
                    container.classList.add('enabled');
                } else {
                    container.classList.remove('enabled');
                }
                
                this.log(`ğŸ“± ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆ | ${appName}: ${checkbox.checked ? 'ON' : 'OFF'}`);
            }

            toggleFeature(featureName) {
                const checkbox = document.getElementById(`feature-${featureName}`);
                const container = checkbox.closest('.checkbox-item');
                
                if (checkbox.checked) {
                    container.classList.add('enabled');
                } else {
                    container.classList.remove('enabled');
                }
                
                this.log(`âš™ï¸ æ©Ÿèƒ½åˆ‡ã‚Šæ›¿ãˆ | ${featureName}: ${checkbox.checked ? 'ON' : 'OFF'}`);
            }

            // ================================================================
            // ã‚¢ãƒ—ãƒªã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
            // ================================================================
            switchApp(appName) {
                // å…¨ã¦ã®ã‚¿ãƒ–ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                document.querySelectorAll('.app-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤ºã«
                document.querySelectorAll('.app-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
                const selectedTab = document.querySelector(`[data-app="${appName}"]`);
                if (selectedTab) {
                    selectedTab.classList.add('active');
                }
                
                // é¸æŠã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                const selectedContent = document.getElementById(`${appName}-content`);
                if (selectedContent) {
                    selectedContent.style.display = 'block';
                }
                
                this.log(`ğŸ”„ ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆ | ${appName}`);
            }

            // ãƒ­ã‚°æ©Ÿèƒ½
            log(message) {
                const timestamp = new Date().toLocaleTimeString('ja-JP');
                const logEntry = `[${timestamp}] ${message}`;
                this.logs.push(logEntry);
                
                const debugLogs = document.getElementById('debugLogs');
                if (debugLogs) {
                    debugLogs.textContent = this.logs.slice(-50).join('\\n');
                    debugLogs.scrollTop = debugLogs.scrollHeight;
                }
                console.log(logEntry);
            }

            async downloadLogs() {
                try {
                    const response = await fetch('/api/generate-log', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ source: 'smart-template-ui', logs: this.logs })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        this.log(`ğŸ“„ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆå®Œäº† | ${data.filename}`);
                    } else {
                        throw new Error(data.error || 'ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                } catch (error) {
                    this.log(`âŒ ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ | ${error.message}`);
                }
            }

            clearLogs() {
                this.logs = [];
                document.getElementById('debugLogs').textContent = 'ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ';
                this.log('ğŸ—‘ï¸ ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            }

            refreshLogs() {
                const debugLogs = document.getElementById('debugLogs');
                debugLogs.textContent = this.logs.slice(-50).join('\\n');
                debugLogs.scrollTop = debugLogs.scrollHeight;
                this.log('ğŸ”„ ãƒ­ã‚°è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã—ãŸ');
            }
        }

        // ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®šæ©Ÿèƒ½ (Aæ–¹å¼: JavaScriptè‡ªå‹•åˆ¤å®š)
        class DeviceDetector {
            constructor() {
                this.userAgent = navigator.userAgent;
                this.isTouch = 'ontouchstart' in window;
                this.screenWidth = window.innerWidth;
                this.screenHeight = window.innerHeight;
            }
            
            isMobile() {
                return /Android|iPhone|iPad/i.test(this.userAgent);
            }
            
            isTablet() {
                return /iPad|Android.*(?=.*Tablet)/i.test(this.userAgent) || 
                       (this.isMobile() && Math.min(this.screenWidth, this.screenHeight) >= 768);
            }
            
            isPortrait() {
                return this.screenHeight > this.screenWidth;
            }
            
            getDeviceType() {
                if (this.isTablet()) {
                    return this.isPortrait() ? 'tablet-portrait' : 'tablet-landscape';
                } else if (this.isMobile()) {
                    return 'mobile';
                } else {
                    return 'desktop';
                }
            }
            
            applyDeviceStyles() {
                const deviceType = this.getDeviceType();
                document.body.setAttribute('data-device', deviceType);
                console.log(`ğŸ” ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š: ${deviceType}`);
            }
        }

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
        let app;
        let deviceDetector;
        
        window.addEventListener('load', () => {
            deviceDetector = new DeviceDetector();
            deviceDetector.applyDeviceStyles();
            app = new SmartTemplateApp();
        });
        
        // ç”»é¢å›è»¢ãƒ»ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                deviceDetector.applyDeviceStyles();
            }, 100);
        });
        
        window.addEventListener('resize', () => {
            deviceDetector.applyDeviceStyles();
        });
        
        function testAPI() { app.testAPI(); }
        function downloadLogs() { app.downloadLogs(); }
        function clearLogs() { app.clearLogs(); }
        function refreshLogs() { app.refreshLogs(); }
        function generateSampleData() { app.generateSampleData(); }
        function loadConfig() { app.loadConfig(); }
        function saveConfig() { app.saveConfig(); }
        function addMoneyTransaction() { app.addMoneyTransaction(); }
        function exportMoneyCSV() { app.exportMoneyCSV(); }
        function copyLogsToClipboard() { app.copyLogsToClipboard(); }
        
        // æ™‚é–“ç®¡ç†é–¢æ•°
        function addTimeRecord() { app.addTimeRecord(); }
        function startTimer() { app.startTimer(); }
        function pauseTimer() { app.pauseTimer(); }
        function stopTimer() { app.stopTimer(); }
        function exportTimeCSV() { app.exportTimeCSV(); }
        
        // ä½“é‡ç®¡ç†é–¢æ•°
        function addWeightRecord() { app.addWeightRecord(); }
        function calculateBMI() { app.calculateBMI(); }
        function exportWeightCSV() { app.exportWeightCSV(); }
        
        // ãƒ¡ãƒ¢ç®¡ç†é–¢æ•°
        function addMemo() { app.addMemo(); }
        function deleteMemo(memoId) { app.deleteMemo(memoId); }
        function exportMemoCSV() { app.exportMemoCSV(); }

        // è¨ˆç®—æ©Ÿç®¡ç†é–¢æ•°
        function calculateNumbers() { app.calculateNumbers(); }
        function clearCalculation() { app.clearCalculation(); }
        function deleteCalcHistory(calcId) { app.deleteCalcHistory(calcId); }
        function exportCalcCSV() { app.exportCalcCSV(); }

        // æœã®ç®¡ç†é–¢æ•°
        function addClothes() { app.addClothes(); }
        function deleteClothes(clothesId) { app.deleteClothes(clothesId); }
        function exportClothesCSV() { app.exportClothesCSV(); }
        function loadClothesStats() { app.loadClothesStats(); }

        // è¨­å®šç®¡ç†UIé–¢æ•°
        function loadConfigUI() { app.loadConfigUI(); }
        function saveConfigUI() { app.saveConfigUI(); }
        function toggleApp(appName) { app.toggleApp(appName); }
        function toggleFeature(featureName) { app.toggleFeature(featureName); }
        
        function resetConfig() { app.resetConfig(); }
        
        // ã‚¢ãƒ—ãƒªã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆé–¢æ•°
        function switchApp(appName) { app.switchApp(appName); }
    </script>
</body>
</html>